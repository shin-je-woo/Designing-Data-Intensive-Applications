# ğŸ”´ ì €ì¥ì†Œì™€ ê²€ìƒ‰

3ì¥ì€ DBê°€ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë°©ë²•ê³¼ ë°ì´í„°ë¥¼ ìš”ì²­í–ˆì„ ë•Œ ë‹¤ì‹œ ê²€ìƒ‰í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì„¤ëª…í•˜ë ¤ê³  í•œë‹¤.

ê°œë°œìê°€ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì €ì¥ê³¼ ê²€ìƒ‰ì— ëŒ€í•´ ì•Œì•„ì•¼ í•˜ëŠ” ì´ìœ 
- ì—¬ëŸ¬ DB ì¤‘ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì•Œë§ëŠ” DB ì—”ì§„ì„ ì„ íƒí•˜ëŠ” ê²ƒì´ í•„ìš”í•˜ë‹¤
- íŠ¹ì • ì‘ì—…ë¶€í•˜(workload) ìœ í˜•ì— ì¢‹ì€ ì„±ëŠ¥ì„ ë‚´ê²Œë” ì €ì¥ì†Œ ì—”ì§„ì„ ì¡°ì •í•˜ë ¤ë©´ ì—”ì§„ì—ì„œ ìˆ˜í–‰ë˜ëŠ” ì‘ì—…ì— ëŒ€í•´ ëŒ€ëµì ìœ¼ë¡œ ì•Œê³  ìˆì–´ì•¼ í•œë‹¤.

ì—”ì§„ ì¢…ë¥˜
- íŠ¸ëœì­ì…˜ì— ìµœì í™”ëœ ì—”ì§„
- ë¶„ì„ì— ìµœì í™”ëœ ì—”ì§„

ìš°ì„  ì´ë²ˆì¥ì—ì„œëŠ” DBì˜ ì¢…ë¥˜ ì¤‘ RDB, NoSQLì´ë¼ ë¶ˆë¦¬ëŠ” DBì—ì„œ ì‚¬ìš©ë˜ëŠ” ì—”ì§„ì— ëŒ€í•´ ì„¤ëª…í•œë‹¤.
- NoSQL / ë¡œê·¸ êµ¬ì¡°(log-structure)
- RDB / í˜ì´ì§€ ì§€í–¥(page-oriented, B-tree)

## ğŸŸ  ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê°•ë ¥í•˜ê²Œ ë§Œë“œëŠ” ë°ì´í„° êµ¬ì¡°

ê°„ë‹¨í•œ DBë¥¼ ë§Œë“¤ì–´ë³´ì.

```bash
#!/bin/bash

db_set() {
  echo "$1,$2" >> database
}

db_get () {
  grep "^$1," dtabase | sed -e "s/^$1,//" | tail -n 1
}
```

key-value í˜•íƒœë¡œ ì €ì¥í•˜ê³  ê°’ì„ ê°€ì ¸ì˜¤ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì´ë‹¤.

```bash
$ db_set 123456 '{"name":"London","attractions":["Big Ben","London Eye"]}'

$ db_set 42 '{"name":"San Francisco","attractions":["Golden Gate Bridge"]}'

$ db_get 42
{"name":"San Francisco","attractions":["Golden Gate Bridge"]}
```

ìœ„ì—ëŠ” ì‘ë™ ì˜ˆì‹œì´ë‹¤.

```bash
$ db_set 42 '{"name":"San Francisco","attractions":["Exploratorium"]}'

$ db_get 42
{"name":"San Francisco","attractions":["Exploratorium"]}

$ cat database
123456,{"name":"London","attractions":["Big Ben","London Eye"]}
42,{"name":"San Francisco","attractions":["Golden Gate Bridge"]}
42,{"name":"San Francisco","attractions":["Exploratorium"]}
```

**db_set** ì„ í˜¸ì¶œí•˜ë”ë¼ë„ ì˜ˆì „ ë²„ì „ì— ë®ì–´ ì”Œìš°ì§€ ì•Šê³  ê³„ì†í•´ì„œ íŒŒì¼ ëì— ì¶”ê°€í•œë‹¤. ìµœì‹  ê°’ì€ key ê°’ì˜ valueì— ëì— ìˆë‹¤.(ê·¸ë˜ì„œ **db_get** ì€ tail -n 1)

`log`
- ì“°ê¸° ì‘ì—…ì´ ë§¤ìš° ë¹ ë¦„
- ë§ì€ DBì—ì„œ ë‚´ë¶€ì ìœ¼ë¡œ append-only ë°©ì‹ì„ ì‚¬ìš©í•¨
- ë°ì´í„°ê°€ ë§ì•„ì§€ë©´ ì„±ëŠ¥ì´ ì¢‹ì§€ ì•ŠìŒ
- ë§¤ë²ˆ í‚¤ë¥¼ ê²€ìƒ‰í•  ë•Œë§ˆë‹¤ í’€ìŠ¤ìº”(O(n))

DBì˜ íŠ¹ì • í‚¤ê°’ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì°¾ê¸° ìœ„í•´ì„œëŠ” `ìƒ‰ì¸`ì„ ì‚¬ìš©í•œë‹¤.

`ìƒ‰ì¸`
- ë¶€ê°€ì ì¸ ë©”íƒ€ë°ì´í„°ë¥¼ ìœ ì§€í•˜ëŠ” ê²ƒ
- ì´ì •í‘œ ì—­í• ë¡œ ì›í•˜ëŠ” ë°ì´í„° ìœ„ì¹˜ë¥¼ ë¹ ë¥´ê²Œ ì°¾ê²Œ í•´ì¤Œ
- ê¸°ë³¸ ë°ì´í„°(primary data)ì—ì„œ íŒŒìƒëœ ì¶”ê°€ì ì¸ êµ¬ì¡°
- DB ë°ì´í„° ìì²´ì ìœ¼ë¡  ì˜í–¥ì´ ì—†ìœ¼ë‚˜ ì§ˆì˜ ì„±ëŠ¥ì— ì˜í–¥ì„ ì¤Œ
- ì¶”ê°€ì ì¸ êµ¬ì¡°ëŠ” ì“°ê¸° ê³¼ì •ì—ì„œ ì˜¤ë²„í—¤ë“œê°€ ë°œìƒ(ë¹„ìš© ë°œìƒ)
- ì“°ê¸° ì„±ëŠ¥ì€ ë¡œê·¸ë³´ë‹¤ ëŠë¦¼
- ë°ì´í„°ë¥¼ ì“¸ë•Œë§ˆë‹¤ ì¸ë±ìŠ¤ë¥¼ ê°±ì‹ í•´ì•¼ í•¨

logì™€ ìƒ‰ì¸ì˜ ì“°ê¸°, ì½ê¸°ì— ëŒ€í•œ ì„±ëŠ¥ ì°¨ì´ëŠ” ì €ì¥ì†Œ ì‹œìŠ¤í…œì—ì„œ ì¤‘ìš”í•œ íŠ¸ë ˆì´ë“œì˜¤í”„ë‹¤.

ìƒ‰ì¸ì€ ì½ê¸° ì§ˆì˜ ì†ë„ë¥¼ í–¥ìƒì‹œí‚¤ì§€ë§Œ ëª¨ë“  ë¶€ë¶„ì— ìƒ‰ì¸ì„ ì„¤ì •í•˜ë©´ ì“°ê¸° ì†ë„ë¥¼ ë–¨ì–´íŠ¸ë¦°ë‹¤.

### ğŸŸ¢ í•´ì‹œ ìƒ‰ì¸

ì•ì˜ ì˜ˆì œì²˜ëŸ¼ ë‹¨ìˆœíˆ íŒŒì¼ì— ì¶”ê°€í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ êµ¬ì„±í•  ë•Œ ê°€ì¥ ê°„ë‹¨í•œ ìƒ‰ì¸ ì „ëµìœ¼ë¡œ keyë¥¼ ë°”ì´íŠ¸ ì˜¤í”„ì…‹ì— ë§µí•‘í•´ ì¸ë©”ëª¨ë¦¬ í•´ì‹œë§µì— ìœ ì§€í•˜ëŠ” ì „ëµì´ ìˆë‹¤.

![img.png](inmemory.png)

ìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ ê°’(í‚¤)ì™€ ìœ„ì¹˜(ë°”ì´íŠ¸ ì˜¤í”„ì…‹)ë¥¼ ì¸ë©”ëª¨ë¦¬ í•´ì‹œ ë§µì— key-value í˜•íƒœë¡œ ë“±ë¡í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.

ì‹¤ì œ ë¹„íŠ¸ìºìŠ¤íŠ¸ë¼ëŠ” ë¦¬ì•…(Riak)ì˜ ê¸°ë³¸ ì €ì¥ì†Œ ì—”ì§„ì´ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ RAMì— ëª¨ë“  í‚¤ë¥¼ ì €ì¥í•œë‹¤ëŠ” ì¡°ê±´ì„ ì „ì œë¡œ ê³ ì„±ëŠ¥ ì½ê¸°, ì“°ê¸° ê¸°ëŠ¥ì„ ë³´ì¥í•œë‹¤.

`ì¥ì `
- ì €ì¥ì†Œë¥¼ ëª¨ë‘ ê²€ìƒ‰í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì§§ì€ ì¸ë©”ëª¨ë¦¬ í•´ì‹œ ë§µì„ íƒìƒ‰í•¨ìœ¼ë¡œì„œ ë¹ ë¥´ê²Œ ê²€ìƒ‰ì´ ê°€ëŠ¥í•˜ë‹¤.
- RAMì— ì ì€ ìš©ëŸ‰ë§Œ ì €ì¥í•˜ê³  ì‹¤ì œ ë°ì´í„°ëŠ” ë””ìŠ¤í¬ì— ì €ì¥í•˜ë¯€ë¡œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì—ì„œ ìœ ë¦¬í•˜ë‹¤.
- ë§Œì•½ ì½ìœ¼ë ¤ëŠ” ë°ì´í„°ê°€ ì´ë¯¸ OS ìºì‹œì— ìˆë‹¤ë©´ ë””ìŠ¤í¬ë¥¼ ì½ì„ í•„ìš”ë„ ì—†ì–´ ë” ë¹ ë¥´ë‹¤.
- í‚¤ê°’ì´ ìì£¼ ê°±ì‹ ë˜ëŠ” ìƒí™©ì— ë§¤ìš° ìœ ë¦¬í•˜ë‹¤.
  - ê³ ì–‘ì´ ë™ì˜ìƒ URLì´ í‚¤ê°’, ì¬ìƒëœ íšŸìˆ˜ê°€ valueì¸ ê²½ìš°

`ë‹¨ì `

- íŒŒì¼ì— ì¶”ê°€ë§Œ í•œë‹¤ë©´ ê²°êµ­ ë””ìŠ¤í¬ ê³µê°„ì´ ë¶€ì¡±í•´ì§„ë‹¤.
  - ì„¸ê·¸ë¨¼íŠ¸(segment)ë¡œ ë¡œê·¸ë¥¼ ë‚˜ëˆ„ê³  ì»´íŒ©ì…˜(compaction)ì„ ìˆ˜í–‰í•˜ì—¬ í•´ê²°í•¨
    - ![img.png](segment.png)
    - íŠ¹ì • í¬ê¸°ì— ë„ë‹¬í•˜ë©´ ì„¸ê·¸ë¨¼íŠ¸ íŒŒì¼ì„ ë‹«ê³  ìƒˆë¡œìš´ ì„¸ê·¸ë¨¼íŠ¸ íŒŒì¼ì— ì´í›„ ì“°ê¸°ë¥¼ ìˆ˜í–‰
    - ìƒˆë¡œìš´ íŒŒì¼ì—ëŠ” ì¤‘ë³µëœ í‚¤ë¥¼ ë²„ë¦¬ê³  ìµœì‹  ê°’ë§Œì„ ì €ì¥í•˜ì—¬ ìœ ì§€
  - ì„¸ê·¸ë¨¼íŠ¸ì™€ ì»´íŒ©ì…˜ ìˆ˜í–‰ì„ ë³‘ë ¬ë¡œë„ ìˆ˜í–‰í•¨
    - ![img.png](segment2.png)
    - ì—¬ëŸ¬ ì„¸ê·¸ë¨¼íŠ¸ íŒŒì¼ì„ ë™ì‹œì— ë³‘í•©í•˜ì—¬ ì§„í–‰í•  ìˆ˜ë„ ì´ë‹¤.
    - ìµœì‹  ì„¸ê·¸ë¨¼íŠ¸ í™•ì¸ -> 2ë²ˆ ì„¸ê·¸ë¨¼íŠ¸ í™•ì¸ -> 1ë²ˆ ì„¸ê·¸ë¨¼íŠ¸ í™•ì¸ ìˆœì„œë¡œ ê²€ìƒ‰ì„ ì§„í–‰í•˜ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ ì¸¡ë©´ì—ì„œ ìœ ë¦¬í•¨

ì´ëŸ¬í•œ êµ¬ì¡°ë¥¼ ì‹¤ì œë¡œ êµ¬í˜„í•˜ë ¤ë©´ ì—¬ëŸ¬ ì‚¬í•­ì„ ê³ ë ¤í•´ì•¼ í•œë‹¤.
1. íŒŒì¼ í˜•ì‹
   - CSV í˜•ì‹ë³´ë‹¨ ë°”ì´ë„ˆë¦¬ í˜•ì‹ì„ ì‚¬ìš©í•˜ëŠ” í¸ì´ ë” ë¹ ë¥´ê³  ê°„ë‹¨í•¨
2. ë ˆì½”ë“œ ì‚­ì œ
   - DBì—ì„œ ì‚­ì œí• ë•Œ ì‚­ì œ ë ˆì½”ë“œ(=tombstone)ë¼ëŠ” íŠ¹ìˆ˜ ë ˆì½”ë“œë¥¼ ê¸°ë¡í•¨
   - ì‚­ì œ ë ˆì½”ë“œê°€ ë“±ë¡ëœ ê°’ì€ ë‹¤ìŒ ì„¸ê·¸ë¨¼íŠ¸ë¡œ ë³‘í•©ë  ë•Œ ë¬´ì‹œë¨
3. ê³ ì¥ ë³µêµ¬
    - ì„œë²„ê°€ êº¼ì§€ë©´ RAMì— ë“±ë¡í•œ í•´ì‹œ ë§µì´ë¼ ë‹¤ ì‚¬ë¼ì§
    - DBëŠ” ì¬ì‹œì‘ ë ë•Œë§ˆë‹¤ íŒŒì¼ ì „ì²´ë¥¼ ë‹¤ì‹œ ì½ìœ¼ë©´ì„œ ìƒ‰ì¸ì„ ë“±ë¡í•´ì•¼ ë¨
    - ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ìŠ¤ëƒ…ìƒ·ì„ ë””ìŠ¤í¬ì— ì €ì¥í•´ ë³µêµ¬ ì†ë„ë¥¼ ë†’ì„
4. ë¶€ë¶„ì ìœ¼ë¡œ ë ˆì½”ë“œ ì“°ê¸°
   - ë°ì´í„°ë¥¼ ì¶”ê°€í•˜ëŠ” ì¤‘ì— DBê°€ ì£½ì„ ìˆ˜ë„ ìˆìŒ
   - ì²´í¬ì„¬(checksum)ì„ í†µí•´ ì†ìƒëœ ë°ì´í„°ë¥¼
5. ë™ì‹œì„± ì œì–´
   - ì¶”ê°€ì‹œì—ëŠ” ë‹¨ì¼ ì“°ë ˆë“œë§Œ ì“°ê¸°ë¥¼ í—ˆìš©í•œë‹¤.
   - ë°ì´í„°ëŠ” ëª¨ë‘ ë¶ˆë³€ìœ¼ë¡œ ë©€í‹° ìŠ¤ë ˆë“œì—ì„œ ë™ì‹œì— ì½ê¸°ë¥¼ í—ˆìš©í•  ìˆ˜ ìˆë‹¤.

append-only logëŠ” ì—¬ëŸ¬ ì¸¡ë©´ì—ì„œ ì¢‹ì€ ì„¤ê³„ë‹¤.
- ì¶”ê°€ì™€ ì„¸ê·¸ë¨¼íŠ¸ ë³‘í•©ì€ ë¬´ì¡°ê±´ ì¶”ê°€ì´ê¸° ë•Œë¬¸ì— ë¹ ë¥´ë‹¤.
- ìƒˆë¡œìš´ ê°’ì´ ì¶”ê°€ë§Œ ë˜ê¸° ë•Œë¬¸ì— ë™ì‹œì„±ê³¼ ë³µêµ¬ê°€ ë‹¨ìˆœí•˜ë‹¤.
  - ì˜ˆë¥¼ ë“¤ì–´ ê°’ì„ ìˆ˜ì •í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì´ì „ ë°ì´í„°ì™€ ìƒˆë¡œìš´ ë°ì´í„°ê°€ ëª¨ë‘ íŒŒì¼ì— ë‚¨ê²¨ì ¸ ìˆë‹¤.
- ì„¸ê·¸ë¨¼íŠ¸ ë³‘í•©ì„ í†µí•´ ë°ì´í„°ê°€ ê³„ì†í•´ì„œ ì»¤ì§€ëŠ” ê²ƒì„ ë°©ì§€í•œë‹¤.

í•˜ì§€ë§Œ ì œí•œ ì‚¬í•­ë„ ìˆë‹¤.

- í‚¤ê°€ ë„ˆë¬´ ë§ì•„ì§€ë©´ ë©”ëª¨ë¦¬ì— ë¶€ì¡± ë¬¸ì œê°€ ìˆë‹¤.
  - ë©”ëª¨ë¦¬ ëŒ€ì‹  ë””ìŠ¤í¬ë¥¼ ì‚¬ìš©í•  ìˆœ ìˆì§€ë§Œ ì„±ëŠ¥ì—ì„œ ì•„ì‰½ë‹¤.
  - ë©”ëª¨ë¦¬ í™•ì¥ ë¹„ìš©ì´ ë¹„ì‹¸ë‹¤.
  - í•´ì‹œ ì¶©ëŒ í•´ì†Œë¥¼ ìœ„í•œ ë³µì¡í•œ ë¡œì§ì´ í•„ìš”í•˜ë‹¤.
- ë²”ìœ„ ì§ˆì˜(range query)ì— íš¨ìœ¨ì ì´ì§€ ì•Šë‹¤.
  - ë²”ìœ„ ê²€ìƒ‰ì„ ìœ„í•´ì„œ ëª¨ë“  í•´ì‹œë§µì„ í’€ìŠ¤ìº” í•´ì•¼ í•œë‹¤.

### ğŸŸ¢ SSí…Œì´ë¸”ê³¼ LSM íŠ¸ë¦¬

ìœ„ì—ì„œ ì„¤ëª…í•œ ë¡œê·¸ ì €ì¥ì†ŒëŠ” key-valueë¡œ ì €ì¥í•˜ëŠ” ì €ì¥ì†Œì´ë‹¤. ì—¬ê¸°ì— í‚¤ë¡œ ì •ë ¬í•˜ëŠ” ìš”êµ¬ì‚¬í•­ì„ ì¶”ê°€í•˜ë©´ SSí…Œì´ë¸”(Sorted String Table)ì´ë¼ í•œë‹¤.

SSí…Œì´ë¸”ì€ í•´ì‹œ ìƒ‰ì¸ì„ ê°€ì§„ ë¡œê·¸ ì„¸ê·¸ë¨¼íŠ¸ë³´ë‹¤ í° ì¥ì ì´ ìˆë‹¤.
- ì„¸ê·¸ë¨¼íŠ¸ ë³‘í•©ì‹œ ì´ë¯¸ ì •ë ¬ë˜ì–´ ìˆìœ¼ë¯€ë¡œ íš¨ìœ¨ì ìœ¼ë¡œ ë³‘í•©ì´ ê°€ëŠ¥í•˜ë‹¤.(=merge sort)
  - ![img.png](sstable1.png)
  - ìƒˆë¡­ê²Œ ìƒì„±ë˜ëŠ” ì„¸ê·¸ë¨¼íŠ¸ë„ ì •ë ¬ëœ ìƒíƒœë¡œ ìƒì„±ëœë‹¤.
  - ì—¬ëŸ¬ ì„¸ê·¸ë¨¼íŠ¸ì— ê°™ì€ í‚¤ê°€ ìˆìœ¼ë©´ ìµœì‹  ì„¸ê·¸ë¨¼íŠ¸ ê°’ì„ ì‚¬ìš©í•˜ê³  ì˜¤ë˜ëœ ê°’ì€ ë¬´ì‹œí•œë‹¤.
- ë©”ëª¨ë¦¬ì— ëª¨ë“  í‚¤ë¥¼ ë“±ë¡í•´ë‘˜ í•„ìš”ê°€ ì—†ë‹¤. ê·¼ì²˜ ìŠ¤ìº”ì„ í•˜ë©´ ëœë‹¤.
  - ì˜ˆë¥¼ ë“¤ì–´ handiworkë¥¼ ì°¾ìœ¼ë ¤ í• ë•Œ í‚¤ê°€ ë“±ë¡ë˜ì–´ ìˆì§€ ì•Šë”ë¼ë„ handbag-handsome í‚¤ ì‚¬ì´ë¥¼ ìŠ¤ìº”í•˜ë©´ ëœë‹¤.
- ë ˆì½”ë“œë“¤ì„ ë¸”ë¡ìœ¼ë¡œ ê·¸ë£¹í™”í•˜ê³  ì••ì¶•í•˜ì—¬ ë””ìŠ¤í¬ì— ì €ì¥í•œë‹¤.
  - ì¸ë©”ëª¨ë¦¬ ìƒ‰ì¸ì€ ê° ì••ì¶•ëœ ë¸”ë¡ì˜ ê°’ì„ ê°€ì§„ë‹¤.
  - ì½ê¸° ìš”ì²­ì‹œ ì••ì¶•ëœ ë¸”ë¡ë§Œ í•´ì œí•˜ì—¬ ì½ìœ¼ë©´ ë˜ë¯€ë¡œ I/O ì‚¬ìš©ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤.
  - ì••ì¶•í•˜ì—¬ ì €ì¥í•˜ë¯€ë¡œ ë””ìŠ¤í¬ ì €ì¥ ê³µê°„ì— ìœ ë¦¬í•˜ë‹¤.

_SSí…Œì´ë¸” ìƒì„±ê³¼ ìœ ì§€_

ì‹¤ì œë¡œ ë°ì´í„°ë¥¼ í‚¤ë¡œ ì •ë ¬í•˜ëŠ”ê²Œ ì‰¬ìš¸ê¹Œ? ë°ì´í„°ëŠ” ìˆœì„œëŒ€ë¡œ ì…ë ¥ë˜ì§€ ì•Šê³  ì„ì˜ì˜ ìˆœì„œë¡œ ì…ë ¥ëœë‹¤.

ë””ìŠ¤í¬ì—ì„œ ì •ë ¬ëœ êµ¬ì¡°ë¥¼ ìœ ì§€í•˜ëŠ”ê²Œ ê°€ëŠ¥ì€ í•˜ì§€ë§Œ ë©”ëª¨ë¦¬ì—ì„œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ í›¨ì”¬ ì‰½ë‹¤.

red-black tree, AVL treeì™€ ê°™ì€ íŠ¸ë¦¬ ë°ì´í„° êµ¬ì¡°ë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.

ì´ì œ ì €ì¥ì†Œ ì—”ì§„ì„ ë‹¤ìŒê³¼ ê°™ì´ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

- ì“°ê¸° ìš”ì²­ì´ ì˜¤ë©´ ì¸ë©”ëª¨ë¦¬ ê· í˜• íŠ¸ë¦¬(balance tree)ì— ì¶”ê°€í•œë‹¤.
  - ì˜ˆë¥¼ ë“¤ì–´ red-black tree
  - ì´ë•Œ ì¸ë©”ëª¨ë¦¬ íŠ¸ë¦¬ëŠ” ë©¤í…Œì´ë¸”(memtable)ì´ë¼ í•œë‹¤.
- ë©¤í…Œì´ë¸”ì˜ ë°ì´í„°ê°€ ì„ê³„ê°’ë³´ë‹¤ ì»¤ì§€ë©´ SSí…Œì´ë¸”ë¡œ ë””ìŠ¤í¬ì— ê¸°ë¡í•œë‹¤.
  - ë©¤í…Œì´ë¸”ì— ì´ë¯¸ ì •ë ¬ëœ ìƒíƒœë¡œ ì €ì¥ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ë¹ ë¥´ê²Œ ì €ì¥ì´ ê°€ëŠ¥í•˜ë‹¤.
  - ì´ë•Œ ë§Œë“¤ì–´ì§„ ì„¸ê·¸ë¨¼íŠ¸ê°€ ê°€ì¥ ìµœì‹  ì„¸ê·¸ë¨¼íŠ¸ê°€ ëœë‹¤.
- ì½ê¸° ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ ê°€ì¥ ë¨¼ì € ë©¤í…Œì´ë¸”ì—ì„œ ê²€ìƒ‰í•œë‹¤.
  - ê·¸ í›„ì—ëŠ” ë””ìŠ¤í¬ì— ì €ì¥ëœ ê°€ì¥ ìµœì‹ ì˜ ì„¸ê·¸ë¨¼íŠ¸ ìˆœì„œë¡œ ê²€ìƒ‰í•œë‹¤.
- ì„¸ê·¸ë¨¼íŠ¸ íŒŒì¼ì„ í•©ì¹˜ê³  ë³‘í•©í•˜ëŠ” ì»´íŒ©ì…˜ ê³¼ì •ì„ ìˆ˜í–‰í•œë‹¤.

ì´ ê³„íšì—ëŠ” í•œê°€ì§€ ë¬¸ì œì ì´ ìˆë‹¤. ë§Œì•½ DBê°€ ì£½ìœ¼ë©´ ì¸ë©”ëª¨ë¦¬ì— ì €ì¥ë˜ì–´ ìˆë˜ ë°ì´í„°ë“¤ì€ ë””ìŠ¤í¬ì— ì €ì¥ë˜ì§€ ëª»í•˜ê³  ì†ì‹¤ëœë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë°©ë²•ì´ ìˆë‹¤.
- ë§¤ë²ˆ ì“°ê¸°ë§ˆë‹¤ ë””ìŠ¤í¬ì— ë¡œê·¸ë¡œ ê¸°ë¡í•´ë‘ì–´ì•¼ í•œë‹¤
- ì´ ë¡œê·¸ëŠ” ë©¤í…Œì´ë¸” ë³µêµ¬ìš©ìœ¼ë¡œë§Œ ì“°ì´ê¸° ë•Œë¬¸ì— ìˆœì„œë¥¼ ë³´ì¥í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.
- ë©¤í…Œì´ë¸”ì´ ë””ìŠ¤í¬ì— SSí…Œì´ë¸”ì„ ê¸°ë¡í•˜ê³  ë‚˜ë©´ í•´ë‹¹ ë¡œê·¸ëŠ” ì‚­ì œí•œë‹¤.

_SSí…Œì´ë¸”ì—ì„œ LSM íŠ¸ë¦¬ ë§Œë“¤ê¸°_

íŒ¨íŠ¸ë¦­ ì˜¤ë‹(Patrick O'Neil)ì´ `LSM(Log-Structured Merge-tree) íŠ¸ë¦¬`ë€ ì´ë¦„ìœ¼ë¡œ ì§€ê¸ˆê¹Œì§€ ì„¤ëª…í•œ ë‚´ìš©ì˜ ì•Œê³ ë¦¬ì¦˜ì„ ë°œí‘œí–ˆë‹¤. 

ë˜í•œ LevelDB, RoksDB, Cassandra, HBase ë“± DBì—ì„œ ì‚¬ìš©ëœë‹¤.

ì´ êµ¬ì¡°ëŠ” ë¡œê·¸ êµ¬ì¡°í™” íŒŒì¼ ì‹œìŠ¤í…œì— ê¸°ë°˜ì´ ëê³  ì •ë ¬ëœ íŒŒì¼ ë³‘í•©ê³¼ ì»´íŒ©ì…˜ ì›ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” ì €ì¥ì†Œ ì—”ì§„ì„ `LSM ì €ì¥ì†Œ ì—”ì§„`ì´ë¼ ë¶€ë¥¸ë‹¤.

Lucenceì€ elastic search, solrì—ì„œ ì‚¬ìš©ë˜ëŠ” ì£¼ìš” ê²€ìƒ‰ ì—”ì§„ì´ë‹¤. ë£¨ì”¬ì€ ìš©ì–´ ì‚¬ì „ì„ ì €ì¥í•˜ê¸° ìœ„í•´ ìœ ì‚¬í•œ ë°©ë²•ì„ ì‚¬ìš©í•œë‹¤.
- ìš©ì–´(key), ìš©ì–´ë¥¼ í¬í•¨í•œ ëª¨ë“  ë¬¸ì„œì˜ id ëª©ë¡ list(value)ë¡œ í•˜ëŠ” key-value êµ¬ì¡°ë¡œ êµ¬í˜„í•œë‹¤.
- key-valueëŠ” SSí…Œì´ë¸”ê³¼ ê°™ì€ ì •ë ¬ íŒŒì¼ì— ìœ ì§€í•˜ê³  í•„ìš”ì— ë”°ë¼ ë³‘í•©í•œë‹¤.

_ì„±ëŠ¥ ìµœì í™”_

- Bloom filter
  - DBì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë°ì´í„°ë¥¼ ê²€ìƒ‰í•  ê²½ìš° ëª¨ë“  ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ëª¨ë‘ ê²€ìƒ‰í•´ì•¼ **ì—†ë‹¤**ëŠ” ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŒ
  - Bloom filterë¥¼ í†µí•´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë°ì´í„°ì„ì„ ì•Œë ¤ì¤Œìœ¼ë¡œì„œ ë¶ˆí•„ìš”í•œ ë””ìŠ¤í¬ ì½ê¸° ì‘ì—…ì„ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.
- SSí…Œì´ë¸” ì••ì¶•ê³¼ ë³‘í•© ì „ëµ
  - size-tiered compaction
    - HBase, cassandra
    - ì‘ì€ SSí…Œì´ë¸”ì„ í° SSí…Œì´ë¸”ì— ì—°ì´ì–´ ë³‘í•©í•œë‹¤.
    - ë‹¨ìˆœí•´ì„œ ì“°ê¸°ê°€ ë¹ ë¦„
  - leveled compaction
    - level db, roks db, cassandra
    - ë” ì‘ì€ ë²„ë¬´ì´ë¡œ SSí…Œì´ë¸”ì„ ì˜¤ë˜ëœ ìˆœì„œì— ë”°ë¼ ë ˆë²¨ë³„ë¡œ ë‚˜ëˆ„ì–´ ì €ì¥
    - íŠ¹ì • í‚¤ë¥¼ ì°¾ì„ ë•Œ ì‘ì€ ë²”ìœ„ë§Œ ë³´ë©´ ë˜ì–´ ì½ê¸°ì— ìœ ë¦¬, ì»´íŒ©ì…˜ì´ ìì£¼ ì¼ì–´ë‚˜ ì“°ê¸°ì— ë¶ˆë¦¬

LSMì€ ì˜ ì‚¬ìš©í•œë‹¤ë©´ ë²”ìœ„ ì§ˆì˜ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ìˆ˜í–‰í•¨ê³¼ ë™ì‹œì— ë””ìŠ¤í¬ ì“°ê¸°ë„ ë¹ ë¥´ê¸° ë•Œë¬¸ì— ë§¤ìš° ë†’ì€ ì½ê¸°, ì“°ê¸° ì²˜ë¦¬ëŸ‰ì„ ë³´ì¥í•  ìˆ˜ ìˆë‹¤. 

### ğŸŸ¢ BíŠ¸ë¦¬

ë¡œê·¸ êµ¬ì¡°í™” ìƒ‰ì¸ë³´ë‹¤ëŠ” B-treeêµ¬ì¡°ê°€ ê°€ì¥ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” êµ¬ì¡°ì´ê³  ë‘˜ì€ ìƒë‹¹íˆ ë‹¤ë¥´ë‹¤.

B-treeëŠ” 1970ë…„ì— ë“±ì¥í–ˆê³  10ë…„ë„ ì•ˆë¼ ë³´í¸í™”ë˜ì—ˆë‹¤. ê·¸ í›„ ì§€ê¸ˆê¹Œì§€ RDB, NoSQLì˜ í‘œì¤€ìœ¼ë¡œì„œ ì‚¬ìš©ë˜ê³  ìˆë‹¤.

B-treeëŠ” SSí…Œì´ë¸”ê³¼ ê°™ì´ key-value êµ¬ì¡°ë¡œ í‚¤ë¡œ ì •ë ¬ëœ ê°’ì„ ìœ ì§€í•˜ê¸°ì— range queryì— ìœ ë¦¬í•˜ë‹¤. ë¡œê·¸ì™€ ë¹„ìŠ·í•œì ì€ ì´ê²Œ ì „ë¶€ê³  ì´ ì™¸ì—ëŠ” ì „ë¶€ ë‹¤ë¥´ë‹¤.

![img.png](tree.png)

- 4Kb(ë•Œë¡œëŠ” ë” í° í¬ê¸°ë¡œ) ê³ ì • í¬ê¸° ë¸”ë¡ì´ë‚˜ í˜ì´ì§€ë¡œ ë‚˜ëˆ„ì–´ í•œë²ˆì— í•˜ë‚˜ì˜ í˜ì´ì§€ë¥¼ ì½ê±°ë‚˜ ì“°ê¸°ë¥¼ ì§„í–‰í•œë‹¤.
  - ì´ëŸ¬í•œ ì„¤ê³„ëŠ” í•˜ë“œì›¨ì–´ì™€ ë°€ì ‘í•œ ê´€ë ¨ì´ ìˆë‹¤.
- ê° í˜ì´ì§€ëŠ” ì£¼ì†Œë‚˜ ìœ„ì¹˜ë¥¼ ì´ìš©í•˜ì—¬ ì‹ë³„í•œë‹¤.
  - ì´ ë°©ë²•ìœ¼ë¡œ í•˜ë‚˜ì˜ í˜ì´ì§€ê°€ ë‹¤ë¥¸ í˜ì´ì§€ë¥¼ ì°¨ì¡°í•  ìˆ˜ ìˆë‹¤.
- í•œ í˜ì´ì§€ëŠ” BíŠ¸ë¦¬ì˜ Rootë¡œ ì§€ì •ëœë‹¤.
- ìƒ‰ì¸ì€ ë£¨íŠ¸ì—ì„œë¶€í„° ì‹œì‘ëœë‹¤.
- í•˜ìœ„ í˜ì´ì§€ëŠ” í‚¤ê°€ ê³„ì† ì´ì–´ì§€ëŠ” ë²”ìœ„ì— ëŒ€í•œ ì •ë³´ë¥¼ ë‹´ë‹¹í•˜ê³  ì°¸ì¡° ì‚¬ì´ì˜ í‚¤ëŠ” í•´ë‹¹ ë²”ìœ„ ê²½ê³„ê°€ ì–´ë””ì¸ì§€ ë‚˜íƒ€ë‚¸ë‹¤.
- ìœ„ ê·¸ë¦¼ì—ì„œ **251**ì„ ì°¾ê³  ìˆë‹¤. ê·¸ë ‡ê¸°ì— 200~300ì˜ ë²”ìœ„ ê²€ìƒ‰ì„ ì§„í–‰í•˜ê³  ê·¸ ì´í›„ì—” 250ì˜ ë” ì¢ì€ ë²”ìœ„ë¡œ íƒìƒ‰ì„ ì§„í–‰í•œë‹¤.
- ìµœì¢…ì ìœ¼ë¡œëŠ” leaf pageì— ë„ë‹¬í•œë‹¤.
- í•œ í˜ì´ì§€ì—ì„œ í•˜ìœ„ í˜ì´ì§€ë¥¼ ì°¸ì¡°í•˜ëŠ” ìˆ˜ë¥¼ ë¶„ê¸° ê³„ìˆ˜(branching factor)ë¼ ë¶€ë¥¸ë‹¤.
  - í˜„ì¬ ê·¸ë¦¼ì—ì„œëŠ” ë¶„ê¸° ê³„ìˆ˜ëŠ” 6ê°œì´ë‹¤.(refì˜ ìˆ˜)
  - ë¶„ê¸° ê³„ìˆ˜ëŠ” í˜ì´ì§€ ì°¸ì¡°ì™€ ë²”ìœ„ ê²½ê³„ë¥¼ ì €ì¥í•  ê³µê°„ì˜ ì–‘ì„ ë§í•˜ê³  ë³´í†µì€ ìˆ˜ë°±ê°œì— ë‹¬í•œë‹¤.
- B-treeì—ì„œ í‚¤ì˜ ê°’ì„ ê°±ì‹ í•˜ëŠ” ê²½ìš°ì—” ë¦¬í”„ í˜ì´ì§€ë¥¼ ê²€ìƒ‰í•˜ê³  í˜ì´ì§€ì˜ ê°’ì„ ë°”ê¾¼ ë‹¤ìŒ í˜ì´ì§€ë¥¼ ë””ìŠ¤í¬ì— ë‹¤ì‹œ ê¸°ë¡í•œë‹¤.
  - í˜ì´ì§€ì— ëŒ€í•œ ì°¸ì¡°ëŠ” ë™ì¼í•˜ê²Œ ìœ ì§€ëœë‹¤.
- ìƒˆë¡œìš´ í‚¤ë¥¼ ì¶”ê°€í•˜ë©´ ìƒˆë¡œìš´ í‚¤ë¥¼ í¬í•¨í•˜ëŠ” ë²”ìœ„ì˜ í˜ì´ì§€ë¥¼ ì°¾ì•„ í•´ë‹¹ í˜ì´ì§€ì— í‚¤ì™€ ê°’ì„ ì¶”ê°€í•œë‹¤.
- ìƒˆë¡œìš´ í‚¤ë¥¼ ìˆ˜ìš©í•  í˜ì´ì§€ì— ì—¬ìœ  ê³µê°„ì´ ì—†ë‹¤ë©´ í˜ì´ì§€ í•˜ë‚˜ë¥¼ ë°˜ì¯¤ ì±„ì›Œì§„ í˜ì´ì§€ ë‘˜ë¡œ ë‚˜ëˆ„ê³  ìƒìœ„ í˜ì´ì§€ê°€ ìƒˆë¡œìš´ í‚¤ ë²”ìœ„ì˜ í•˜ìœ„ ë¶€ë¶„ë“¤ì„ ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ ê°±ì‹ í•œë‹¤.
  - ![img.png](tree-refactor.png)
  - ìœ„ ê·¸ë¦¼ì²˜ëŸ¼ í˜ì´ì§€ê°€ ê°€ë“ ì°¼ë‹¤ë©´ í˜ì´ì§€ë¥¼ ë‘˜ë¡œ ë‚˜ëˆ„ê³  ìƒìœ„ í˜ì´ì§€ì— ìƒˆë¡œìš´ ì°¸ì¡° ê°’ì„ ê¸°ë¡í•œë‹¤.

ì´ëŸ¬í•œ ì•Œê³ ë¦¬ì¦˜ì„ í†µí•´ íŠ¸ë¦¬ê°€ ê· í˜•ì„ ìœ ì§€í•˜ëŠ” ê²ƒì„ ë³´ì¥í•œë‹¤.

nê°œì˜ í‚¤ë¥¼ ê°€ì§„ B-treeëŠ” ê¹Šì´ê°€ í•­ìƒ O(long n)ì´ë‹¤. ëŒ€ë¶€ë¶„ ë°ì´í„°ë² ì´ìŠ¤ëŠ” B-tree ê¹Šì´ê°€ 3~4ë‹¨ê³„ë©´ ì¶©ë¶„í•˜ë¯€ë¡œ ê²€ìƒ‰ì„ ìœ„í•´ ë§ì€ í˜ì´ì§€ íƒìƒ‰ì´ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤.(ì˜ˆë¥¼ ë“¤ì–´ ë¶„ê¸° ê³„ìˆ˜ 500ì˜ 4Kb í˜ì´ì§€ì˜ 4ë‹¨ê³„ íŠ¸ë¦¬ëŠ” 256TBê¹Œì§€ ì €ì¥ì´ ê°€ëŠ¥í•˜ë‹¤.)

_ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” BíŠ¸ë¦¬ ë§Œë“¤ê¸°_

B-treeì˜ ê¸°ë³¸ ìˆ˜ì • ì“°ê¸° ë™ì‘ì€ ë™ì¼í•œ í˜ì´ì§€ ìœ„ì¹˜ì— ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ë””ìŠ¤í¬ ìƒì— ë®ì–´ ì“°ê¸°ì´ë‹¤. ì¦‰ ë®ì–´ ì“°ë”ë¼ë„ í˜ì´ì§€ë¥¼ ê°€ë¦¬í‚¤ëŠ” ëª¨ë“  ì°¸ì¡°ëŠ” ê·¸ëŒ€ë¡œ ë‚¨ëŠ”ë‹¤. 

ì´ ë™ì‘ì€ LSM íŠ¸ë¦¬ì™€ ê°™ì€ ë¡œê·¸ êµ¬ì¡°í™” ìƒ‰ì¸ê³¼ ëŒ€ì¡°ë˜ëŠ” ì ì´ë‹¤. ë¡œê·¸ êµ¬ì¡°í™” ìƒ‰ì¸ì€ íŒŒì¼ì„ ì¶”ê°€ë§Œ í•  ë¿ ê¸°ì¡´ íŒŒì¼ì— ëŒ€í•´ ìˆ˜ì •í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤.

ë®ì–´ ì“°ê¸°ëŠ” ì—¬ëŸ¬ ë¬¸ì œì ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

1. í•˜ë“œì›¨ì–´ ì¸¡ë©´ì—ì„œ ë³µì¡ì„±
   - HDDì˜ ê²½ìš° ë””ìŠ¤í¬ í—¤ë“œê°€ í•´ë‹¹ ìœ„ì¹˜ë¡œ ì´ë™í•˜ê³  í”Œë˜í„°ê°€ ëŒì•„ì„œ ì›í•˜ëŠ” ìœ„ì¹˜ì— ì˜¬ë•Œê¹Œì§€ ê¸°ë‹¤ë ¸ë‹¤ê°€ ë®ì–´ì“°ê¸°ê°€ ëœë‹¤.
      - ë®ì–´ì“°ëŠ”ë° ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦°ë‹¤.
   - SSDì˜ ê²½ìš° ë¸”ë¡ ë‹¨ìœ„ë¡œ í•œë²ˆì— ì§€ìš°ê³  ë‹¤ì‹œ ì“°ëŠ” ë³µì¡í•œ ë™ì‘ì„ í•œë‹¤.
2. ê³ ì•„ í˜ì´ì§€(orphan page)
   - ê³ ì•„ í˜ì´ì§€ëŠ” ì–´ë–¤ í˜ì´ì§€ì™€ë„ ë¶€ëª¨ ê´€ê³„ê°€ ì—†ëŠ” í˜ì´ì§€ë¥¼ ë§í•œë‹¤.
   - ì¼ë¶€ ë™ì‘ì€ ì—¬ëŸ¬ í˜ì´ì§€ë¥¼ í•œë²ˆì— ë®ì–´ì“°ê¸°ê°€ í•„ìš”í•œ ê²½ìš°ë„ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì‚½ì… ë•Œë¬¸ì— í˜ì´ì§€ê°€ ë„ˆë¬´ ë§ì•„ì ¸ í˜ì´ì§€ë¥¼ ë‚˜ëˆ ì•¼ í•œë‹¤ë©´ ë¶„í• ëœ ë‘ í˜ì´ì§€ë¥¼ ê¸°ë¡í•˜ê³  í•˜ìœ„ í˜ì´ì§€ ì°¸ì¡°ë¥¼ ê°±ì‹ í•˜ê²Œë” ìƒìœ„ í˜ì´ì§€ë¥¼ ë®ì–´ ì¨ì•¼ í•œë‹¤.
     ì´ë•Œ ì¼ë¶€ í˜ì´ì§€ë§Œ ìˆ˜ì •ëœ í›„ DBê°€ ì£½ì–´ë²„ë¦°ë‹¤ë©´ ìƒ‰ì¸ì´ í›¼ì†ë˜ê¸° ë•Œë¬¸ì— ì´ëŠ” ë§¤ìš° ìœ„í—˜í•˜ë‹¤. ì´ë¡œ ì¸í•´ ê³ ì•„ í˜ì´ì§€(orpan page)ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
   - ì´ ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ WAL(wirte-ahead log)ë‚˜ ì¬ì‹¤í–‰ ë¡œê·¸(redo)ë¼ëŠ” ë°ì´í„° êµ¬ì¡°ë¥¼ ì¶”ê°€í•˜ì—¬ ë³µêµ¬ë  ë•Œ ì¼ê´€ì„± ìˆëŠ” ìƒíƒœë¥¼ ë³´ì¥í•œë‹¤.
3. ë™ì‹œì„± ì œì–´
   - ë‹¤ì¤‘ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— B-treeì— ì ‘ê·¼í•˜ë©´ ê°™ì€ ìë¦¬ë¥¼ ë™ì‹œì— ê°±ì‹ í•œë‹¤. ì´ëŠ” ìŠ¤ë ˆë“œ ì¼ê´€ì„±ì´ ê¹¨ì§„ ìƒíƒœë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆê¸°ì— ì£¼ì˜ í•´ì•¼ í•œë‹¤.
     - latch/lockì„ í†µí•´ ë°ì´í„° ì¼ê´€ì„±ì„ ë³´ì¥í•œë‹¤.

ë¡œê·¸ êµ¬ì¡°í™”ì—ì„œ ìƒˆë¡­ê²Œ ë°ì´í„°ë¥¼ ì¶”ê°€í•˜ëŠ” ë°©ì‹ì´ ì´ëŸ¬í•œ ë¬¸ì œì—ì„œëŠ” ë” ì‰½ê²Œ ë¬¸ì œë“¤ì´ í•´ê²°ëœë‹¤. 

_BíŠ¸ë¦¬ ìµœì í™”_

- ì“°ê¸°ë¥¼ 2ë²ˆ ì‹¤í–‰í•˜ê²Œ ë˜ëŠ” WAL ëŒ€ì‹  ì¼ë¶€ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì“°ê¸° ì‹œ ë³µì‚¬ ë°©ì‹(copy-on write scheme)ì„ ì‚¬ìš©í•œë‹¤.
  - ë³€ê²½ë˜ëŠ” í˜ì´ì§€ëŠ” ë‹¤ë¥¸ í˜ì´ì§€ì— ê¸°ë¡í•˜ê³  íŠ¸ë¦¬ì— ìƒìœ„ í˜ì´ì§€ì— ìƒˆë¡œìš´ ë²„ì „ì„ ë§Œë“ ë‹¤.
  - ì´ ë°©ì‹ì€ ë™ì‹œì„±ì—ë„ ìœ ë¦¬í•˜ë‹¤.
- ì „ì²´ í‚¤ë¥¼ ì €ì¥í•˜ëŠ”ê²Œ ì•„ë‹Œ ì¶•ì•½í•´ ì €ì¥í•˜ì—¬ ì €ì¥ ê³µê°„ì„ ì •ëŸ‰ê°›ã„´ë‹¤.
  - í‚¤ëŠ” ë²”ìœ„ì— ëŒ€í•œ ì •ë³´ë§Œ ìˆìœ¼ë©´ ë˜ê¸° ë•Œë¬¸
  - í‚¤ë¥¼ ì ˆì•½í•˜ë©´ ë” ë†’ì€ ë¶„ê¸° ê³„ìˆ˜ë¥¼ ì–»ì„ ìˆ˜ ìˆê³  ê·¸ëŸ¬ë©´ íŠ¸ë¦¬ì˜ ê¹Šì´ ìˆ˜ì¤€ì„ ë‚®ì¶œ ìˆ˜ ìˆë‹¤.
- ì—°ì†ëœ ì½ê¸°ê°€ ê°€ëŠ¥í•˜ë„ë¡ ì •ë ¬í•˜ì—¬ ì €ì¥í•˜ë ¤ê³  í•œë‹¤.
  - í•˜ì§€ë§Œ ë°ì´í„°ê°€ ë§ì•„ì§€ë©´ ìˆœì„œë¥¼ ìœ ì§€í•˜ê¸° ì–´ë µë‹¤.
  - ë°˜ëŒ€ë¡œ LSM íŠ¸ë¦¬ëŠ” ì»´íŒ©ì…˜ ê³¼ì •ì—ì„œ ìˆœì„œë¥¼ ì •ë ¬í•˜ì—¬ ì €ì¥í•´ë‘ê¸° ë•Œë¬¸ì— ìœ ë¦¬í•˜ë‹¤.
- íŠ¸ë¦¬ì— í¬ì¸í„°ë¥´ ì¶”ê°€í•œë‹¤.
  - ê° ë¦¬í”„ í˜ì´ì§€ê°€ ì–‘ìª½ í˜•ì œ í˜ì´ì§€ì— ëŒ€í•œ Next, Prevì™€ ê°™ì€ ì •ë³´ë¥¼ ì¶”ê°€í•œë‹¤ë©´ ë¶€ëª¨ í˜ì´ì§€ë¥¼ ì¡°íšŒí•´ì„œ ë‹¤ì‹œ ë¦¬í”„ë¡œ ê°ˆ í•„ìš”ê°€ ì—†ì´ ë°”ë¡œ ì—°ì†ëœ ì¡°íšŒê°€ ê°€ëŠ¥í•´ì§„ë‹¤.
- í”„ë™íƒˆ íŠ¸ë¦¬(gractal tree) ê°™ì€ B-tree ë³€í˜•ì€ ì¡°íšŒ ì„±ëŠ¥ì„ ìœ„í•´ ë¡œê·¸ êµ¬ì¡°í™” ê°œë…ì„ ì¼ë¶€ ì‚¬ìš©í•˜ê¸°ë„ í•œë‹¤.
  - ë°ì´í„°ë¥¼ ë²„í¼ì— ëª¨ì•„ë‘ì—ˆë‹¤ê°€ í•œë²ˆì— ì´ë™í• ë•Œ ì •ë¦¬í•¨.

### ğŸŸ¢ BíŠ¸ë¦¬ì™€ LSM íŠ¸ë¦¬ ë¹„êµ

BíŠ¸ë¦¬ê°€ ì˜¤ë˜ ì‚¬ìš©ë˜ì–´ ì™”ê³  êµ¬í˜„ ì„±ìˆ™ë„ê°€ ë†’ì§€ë§Œ LSM íŠ¸ë¦¬ë„ ì¥ì  ë•Œë¬¸ì— ê´€ì‹¬ì„ ë°›ê³  ìˆë‹¤.

ê²½í—˜ ì ìœ¼ë¡œ LSM íŠ¸ë¦¬ëŠ” ì“°ê¸°ì— ë¹ ë¥´ê³  BíŠ¸ë¦¬ëŠ” ì½ê¸°ì— ë¹ ë¥´ë‹¤.

ì´ë²ˆ ì¥ì—ì„œëŠ” ì €ì¥ì†Œ ì—ë‹ã„´ì˜ ì„±ëŠ¥ì„ ì¸¡ì •í•  ë•Œ ê³ ë ¤í•˜ë©´ ì¢‹ì€ ì‚¬í•­ë“¤ì— ëŒ€í•´ ì„¤ëª…í•œë‹¤.

_LSM íŠ¸ë¦¬ì˜ ì¥ì _

BíŠ¸ë¦¬ ìƒ‰ì¸ì€ ë°ì´í„°ë¥¼ ì“°ê¸°í•  ë•Œ ìµœì†Œ 2ë²ˆ ê¸°ë¡ëœë‹¤. ì“°ê¸° ì „ ë¡œê·¸ì— ê¸°ë¡, íŠ¸ë¦¬ í˜ì´ì§€ì— í•œë²ˆ. ê·¸ë¦¬ê³  ìˆ˜ì •ì„ í•  ë•Œ ëª‡ ë°”ì´íŠ¸ë§Œ ë°”ë€Œì–´ë„ ì „ì²´ í˜ì´ì§€ë¥¼ ë‹¤ì‹œ ê¸°ë¡í•´ì•¼í•˜ëŠ” ì˜¤ë²„í—¤ë“œë„ ìˆë‹¤. ì¼ë¶€ ì €ì¥ì†Œ ì—”ì§„ì€ ì¥ì• ê°€ ë°œìƒí–ˆì„ ë• ì¼ë¶€ë§Œ ê°±ì‹ ëœ í˜ì´ì§€ë¡œ ì¢…ë£Œë˜ì§€ ì•Šë„ë¡ ë™ì¼í•œ í˜ì´ì§€ë¥¼ ë‘ ë²ˆ ë®ì–´ì“´ë‹¤.

ë¡œê·¸ êµ¬ì¡°í™” ìƒ‰ì¸ ë˜í•œ SSí…Œì´ë¸”ì˜ ë°˜ë³µëœ ì»´íŒ©ì…˜ê³¼ ë³‘í•©ì„ ì§„í–‰í•˜ë©° ì—¬ëŸ¬ë²ˆ ë°ì´í„°ë¥¼ ì“°ê¸° ì§„í–‰í•œë‹¤.

ì´ë ‡ê²Œ ë°ì´í„°ë¥¼ ì“°ê¸° ì§„í–‰í•  ë•Œ ì—¬ëŸ¬ë²ˆ ì“°ê¸°ê°€ ë°œìƒí•˜ëŠ” ê²ƒì„ **ì“°ê¸° ì¦í­(write amplification)**ì´ë¼ í•œë‹¤. íŠ¹íˆ SSDëŠ” ë®ì–´ì“°ê¸° íšŸìˆ˜ê°€ ì œí•œë˜ê¸° ë•Œë¬¸ì— íŠ¹ë³„íˆ ê´€ì‹¬ì„ ê°€ì§€ê²Œ ëœë‹¤.

ì“°ê¸°ê°€ ë§ì´ ë°œìƒí•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì“°ê¸°ê°€ í•˜ë“œì›¨ì–´ì˜ ì„±ëŠ¥ê³¼ ì—°ê´€ë˜ì–´ ì„±ëŠ¥ ë³‘ëª©ì´ ìˆì„ ìˆ˜ ìˆë‹¤. ì´ëŸ° ê²½ìš°ì—ëŠ” ì“°ê¸° ì¦í­ì´ ë°”ë¡œ ì„±ëŠ¥ê³¼ ì—°ê²°ëœë‹¤.

ì´ëŸ¬í•œ ë¶€ë¶„ì—ì„œ LSM íŠ¸ë¦¬ì˜ ì¥ì ì´ ìˆë‹¤.

1. LSMíŠ¸ë¦¬ëŠ” BíŠ¸ë¦¬ë³´ë‹¤ ì“°ê¸° ì²˜ë¦¬ëŸ‰ì—ì„œ íš¨ìœ¨ì´ ì¢‹ë‹¤.
   - LSMíŠ¸ë¦¬ê°€ ìƒëŒ€ì ìœ¼ë¡œ ì“°ê¸° ì¦í­ì´ ë‚®ë‹¤. í˜ì´ì§€ë¥¼ ë®ì–´ ì“°ëŠ”ê²Œ ì•„ë‹Œ ìˆœì°¨ì ìœ¼ë¡œ íŒŒì¼ì„ ì“°ê¸°ë§Œ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
   - SSDì—ì„œ ì´ëŸ¬í•œ íŠ¹ì§•ìœ¼ë¡œ LSMíŠ¸ë¦¬ê°€ ìœ ë¦¬í•˜ë‹¤.
2. LSM íŠ¸ë¦¬ëŠ” ì••ì¶•ë¥ ì´ ì¢‹ë‹¤.
   - BíŠ¸ë¦¬ì— ë¹„í•´ ë””ìŠ¤í¬ì— ë” ì ì€ íŒŒì¼ì„ ìƒì„ í•œë‹¤.
   - BíŠ¸ë¦¬ëŠ” íŒŒí¸í™”ë¡œ í˜ì´ì§€ì— ì—¬ìœ  ê³µê°„ì„ ìœ„í•´ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë””ìŠ¤í¬ ê³µê°„ì„ ì ìœ í•œë‹¤.
   - LSM íŠ¸ë¦¬ëŠ” ì£¼ê¸°ì ìœ¼ë¡œ ì»´íŒ©ì…˜ì„ ì§„í–‰í•˜ë©° SSí…Œì´ë¸”ë¡œ ê¸°ë¡í•´ë‘ê¸° ë•Œë¬¸ì— ì••ì¶•ë¥ ì´ ë” ë†’ë‹¤. leveled compaction ì „ëµì„ ì‚¬ìš©í•˜ë©´ íŠ¹íˆ ê·¸ë ‡ë‹¤.
3. SSDì—ì„œ ìœ ë¦¬í•˜ë‹¤.
    - ëŒ€ë¶€ë¶„ì˜ SSD íŒì›¨ì–´ì—ì„œ ì„ì˜ ì“°ê¸°ë¥¼ ìˆœì°¨ ì“°ê¸°ë¡œ ì „í™˜í•˜ì—¬ ì‚¬ìš©í•˜ê¸°ì— ë¬´ì¡°ê±´ LSM íŠ¸ë¦¬ê°€ ìœ ë¦¬í•˜ë‹¤ê³  í• ìˆœ ì—†ê¸´ í•˜ë‹¤.
    - ë‚®ì€ ì“°ê¸° ì¦í­ê³¼ ì••ì¶•ë¥ ì€ SSDì—ì„œ ìœ ë¦¬í•œ ê²ƒì€ í™•ì‹¤í•˜ë‹¤.
    - ë°ì´í„°ë¥¼ ì••ì¶•í•´ ë‘ì–´ ë¹ ë¥´ê²Œ ì½ê¸°ê°€ ê°€ëŠ¥í•˜ë‹¤.
    - ì“°ê¸° ë°ì´í„°ë¥¼ ëª¨ì•„ë‘ì—ˆë‹¤ê°€ í•œë²ˆì— ì“°ê¸°ë¥¼ ì§„í–‰í•˜ë¯€ë¡œ ë¹ ë¥´ê²Œ ì“°ê¸°ê°€ ê°€ëŠ¥í•˜ë‹¤.

_LSM íŠ¸ë¦¬ì˜ ë‹¨ì _

1. ì»´íŒ©ì…˜ ê³¼ì •ìœ¼ë¡œ ì¸í•œ ë¶€í•˜
   - ì»´íŒ©ì…˜ ê³¼ì •ìœ¼ë¡œ ì¸í•´ ì½ê¸°ì™€ ì“°ê¸° ì„±ëŠ¥ì— ì˜í–¥
   - ë™ì‹œì„± ì œì–´ë¥¼ ìœ„í•´ ì»´íŒ©ì…˜ ì§„í–‰ ì¤‘ì—ëŠ” ì½ê¸° or ì“°ê¸°ì— ëŒ€í•´ ëŒ€ê¸°ë¥¼ ì§„í–‰í•˜ëŠ”ë° ì»´íŒ©ì…˜ ê³¼ì •ì€ ë””ìŠ¤í¬ì—ì„œ ë¹„ì‹¼ ê³¼ì •ì´ë¼ ì‘ë‹µ ì‹œê°„ì´ ëŠë ¤ì§ˆ ìˆ˜ ìˆë‹¤.
   - ì´ëŸ¬í•œ ë¶€ë¶„ìœ¼ë¡œ ì¸í•´ BíŠ¸ë¦¬ì— ë¹„í•´ ì„±ëŠ¥ì„ ì˜ˆì¸¡í•˜ê¸° ì–´ë µë‹¤.
2. ë†’ì€ ì“°ê¸° ë¹„ìœ¨
   - ë°ì´í„°ë¥¼ ì“°ê¸° ìœ„í•œ ìŠ¤ë ˆë“œì™€ ë©¤í…Œì´ë¸”ì„ SSí…Œì´ë¸”ë¡œ ì»´íŒ©ì…˜í•˜ëŠ” ì“°ê¸°ê°€ ëª¨ë‘ í•˜ë‚˜ì˜ ë””ìŠ¤í¬ ì“°ê¸° ëŒ€ì—­í­ì„ ê³µìœ í•œë‹¤.
   - ë””ìŠ¤í¬ê°€ ì´ˆë‹¹ ì“¸ ìˆ˜ ìˆëŠ” ìµœëŒ€ ë°ì´í„°ì–‘ì„ ê³µìœ í•´ì•¼ í•˜ê¸°ì— ì„±ëŠ¥ì— ë³‘ëª©ì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤.
3. ëª…ì‹œì  ëª¨ë‹ˆí„°ë§ í•„ìš”
   - ì„¸ê·¸ë¨¼íŠ¸ëŠ” ë””ìŠ¤í¬ê°€ ëª¨ë‘ ê½‰ ì°°ë•Œê¹Œì§€ ê³„ì†í•´ì„œ ì¦ê°€í•œë‹¤.
   - ê³„ì† ì¦ê°€ë˜ëŠ” ì„¸ê·¸ë¨¼íŠ¸ëŠ” ì½ê¸° ìš”ì²­ì‹œ ë” ë§ì€ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ í™•ì¸í•´ì•¼ë˜ëŠ” ê²°ê³¼ë¡œ ì´ì–´ì ¸ ì½ê¸°ê°€ ëŠë ¤ì§„ë‹¤.
   - ì´ëŸ¬í•œ ë¶€ë¶„ì„ ê°œë°œìê°€ ì§ì ‘ ëª¨ë‹ˆí„°ë§í•˜ë©° íŠœë‹í•´ì£¼ì–´ì•¼ í•œë‹¤.
4. RDBì—ëŠ” BíŠ¸ë¦¬ê°€ ë” ì˜ ì–´ìš¸ë¦°ë‹¤.
   - BíŠ¸ë¦¬ëŠ” ê° í‚¤ê°€ ìƒ‰ì¸ì˜ í•œê³³ì—ë§Œ ì •í™•íˆ ì¡´ì¬í•˜ì§€ë§Œ LSMíŠ¸ë¦¬ëŠ” ê°™ì€ í‚¤ ê°’ì´ ì—¬ëŸ¬ ì„¸ê·¸ë¨¼íŠ¸ì— ì¡´ì¬í•  ìˆ˜ ìˆë‹¤.
   - BíŠ¸ë¦¬ëŠ” ìƒ‰ì¸ì—ì„œ ì§ì ‘ lockì„ ì§„í–‰í•˜ê¸°ì— ê°•ë ¥í•œ íŠ¸ëœì­ì…˜ ê²©ë¦¬ê°€ í•„ìš”í•œ RDBì— ë” ì–´ìš¸ë¦°ë‹¤.

BíŠ¸ë¦¬ëŠ” DB ì•„í‚¤í…ì²˜ì—ì„œ ì˜ˆì „ë¶€í„° ì‚¬ìš©ë˜ì–´ ì§€ê³  ìˆë‹¤. ë˜í•œ ì„±ëŠ¥ì ìœ¼ë¡œë„ ì¢‹ê¸°ì— ì‚¬ë¼ì§ˆ ê°€ëŠ¥ì„±ì€ ì—†ë‹¤.

ë°˜ë©´ ìƒˆë¡œìš´ ë°ì´í„° ì €ì¥ì†Œì—ì„œëŠ” ë¡œê·¸ êµ¬ì¡°í™” ìƒ‰ì¸ì´ ì ì  ë“±ì¥í•˜ê³  ìˆë‹¤. ì ì ˆí•œ ì‚¬ìš© ì‚¬ë¡€ì— ë”°ë¼ ì í•©í•œ ì €ì¥ì†Œ ì—”ì§„ ìœ í˜•ì„ ê²°ì •ì€ ì•„ì§ ì—†ê¸° ë•Œë¬¸ì— ê²½í—˜ê³¼ í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ ë” ì¢‹ì€ ì €ì¥ì†Œ ì—”ì§„ì„ ì„ íƒí•˜ëŠ” ë°©ë²•ë„ ê´œì°®ë‹¤.

### ğŸŸ¢ ê¸°íƒ€ ìƒ‰ì¸ êµ¬ì¡°

ì§€ê¸ˆê¹Œì§„ key-value í˜•íƒœì˜ ìƒ‰ì¸ì„ ì‚´í´ë´¤ë‹¤. key-value ìƒ‰ì¸ì€ RDBì—ì„œ primary key ìƒ‰ì¸ì´ ëŒ€í‘œì ì¸ ì˜ˆì´ë‹¤.

ê¸°ë³¸í‚¤ë¡œ RDBì—ì„œëŠ” í•˜ë‚˜ì˜ ë¡œìš°, ë¬¸ì„œí˜• DBì—ì„œëŠ” í•˜ë‚˜ì˜ ë¬¸ì„œ, ê·¸ë˜í”„í˜• DBì—ì„œëŠ” í•˜ë‚˜ì˜ ì •ì ì„ ê³ ìœ í•˜ê²Œ ì‹ë³„í•˜ëŠ”ë° ì‚¬ìš©ëœë‹¤.

ë³´ì¡° ìƒ‰ì¸(secondary index)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒë„ ì¼ë°˜ì ì¸ ë°©ë²•ì´ë‹¤. ë³´ì¡° ìƒ‰ì¸ì€ ë³´í†µ íš¨ìœ¨ì ì¸ joinì„ ìœ„í•´ ì‚¬ìš©ëœë‹¤.

ê¸°ë³¸í‚¤ ìƒ‰ì¸ê³¼ ì°¨ì´ì ì€ í‚¤ê°€ ê³ ìœ í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤. í‚¤ë¥¼ ê°€ì§„ ë§ì€ ë¡œìš°ê°€ ìˆì„ ìˆ˜ ìˆë‹¤.

ì´ëŸ¬í•œ ì¤‘ë³µ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë‘ê°€ì§€ ë°©ë²•ì´ ìˆë‹¤.
1. ìƒ‰ì¸ ê°’ì— ì¼ì¹˜í•˜ëŠ” ë¡œìš° ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“¤ì–´ ë°©ë²•
2. ìƒ‰ì¸ì— ìœ ë‹ˆí¬í•œ ë¡œìš° ì‹ë³„ìë¥¼ ì¶”ê°€í•´ ê³ ìœ í•˜ê²Œ ë§Œë“œëŠ” ë°©ë²•

_ìƒ‰ì¸ ì•ˆì— ê°’ ì €ì¥í•˜ê¸°_

ìƒ‰ì¸ì—ì„œ í‚¤ëŠ” ì§ˆì˜ì–´ê°€ ê²€ìƒ‰í•˜ëŠ” ëŒ€ìƒì´ì§€ë§Œ ê°’ì€ ë‘ê°€ì§€ë¥¼ ì˜ë¯¸í•œë‹¤.
1. ê°’ì€ ì‹¤ì œ ë¡œìš°
2. ë‹¤ë¥¸ ê³³ì— ì €ì¥ëœ ë¡œìš°ë¥¼ ê°€ë¥´í‚¤ëŠ” ì°¸ì¡°
   - ì°¸ì¡°ì¸ ê²½ìš° heap fileì´ë¼ í•˜ê³  íŠ¹ì • ìˆœì„œ ì—†ì´ ë°ì´í„°ë¥¼ ì €ì¥í•œë‹¤.

ìƒ‰ì¸ ì•ˆì— íŒŒì¼ì„ ì €ì¥í•˜ëŠ” ë°©ì‹ë„ ì—¬ëŸ¬ ë°©ë²•ì´ ìˆë‹¤.
1. heap file ì €ì¥ ë°©ì‹
   - ìƒ‰ì¸ì€ í™ íŒŒì¼ì—ì„œ ìœ„ì¹˜ë§Œ ì°¸ì¡°í•˜ê³  ì‹¤ì œ ë°ì´í„°ëŠ” ë‹¤ë¥¸ ì €ì¥ ê³µê°„ì—ì„œ ê°€ì ¸ì˜¨ë‹¤.
   - heap file í˜•ì‹ì€ ì—¬ëŸ¬ ë³´ì¡° ìƒ‰ì¸ì´ ì¡´ì¬í•  ë•Œ ë°ì´í„° ì¤‘ë³µì„ í”¼í•  ìˆ˜ ìˆë‹¤.
   - ì €ì¥ ê³µê°„ì´ ë§ì´ í•„ìš”í•  ê²½ìš° ì½ê¸° ì„±ëŠ¥ì—ì„œ ë¶ˆë¦¬í•˜ë‹¤.
2. í´ëŸ¬ìŠ¤í„°ë“œ ìƒ‰ì¸(clustered index)
   - ìƒ‰ì¸ì•ˆì— ë°”ë¡œ ë¡œìš° ìì²´ë¥¼ ì €ì¥í•œë‹¤.
   - MySQLì˜ InnoDB ì—”ì§„ì—ì„œ ì‚¬ìš©ëœë‹¤. MS SQLì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
   - ê¸°ë³¸í‚¤ê°€ ì–¸ì œë‚˜ í´ëŸ¬ìŠ¤í„°ë“œ ìƒ‰ì¸ì´ê³  ë³´ì¡° ìƒ‰ì¸ì€ heap fileì´ ì•„ë‹Œ ê¸°ë³¸í‚¤ë¥¼ ì°¸ì¡°í•œë‹¤.
3. ì»¤ë²„ë§ ìƒ‰ì¸(covering index) or í¬ê´„ì—´ì´ ìˆëŠ” ìƒ‰ì¸(index with included column)
    - í´ëŸ¬ìŠ¤í„° ìƒ‰ì¸(ìƒ‰ì¸ ë‚´ì— ë°ì´í„°ë¥¼ ì €ì¥)ê³¼ ë¹„í´ëŸ¬ìŠ¤í„°ë“œ ìƒ‰ì¸(ìƒ‰ì¸ ì•ˆì— ì°¸ì¡°ë§Œ ì €ì¥)ì˜ ì ˆì¶©ì•ˆ
    - ìƒ‰ì¸ ì•ˆì— ì¼ë¶€ ì»¬ëŸ¼ì„ ì €ì¥í•´ë‘ì–´ ì¼ë¶€ì˜ ì§ˆì—ì—ëŠ” ë°”ë¡œ ì‘ë‹µì´ ê°€ëŠ¥í•˜ë‹¤. (ì´ëŸ° ê²½ìš°ë¥¼ ìƒ‰ì¸ì˜ ì§ˆì˜ë¥¼ ì»¤ë²„í–ˆë‹¤ë¼ê³  í•œë‹¤.)

ëª¨ë“  ìƒ‰ì¸ì€ ì½ê¸° ì„±ëŠ¥ì„ ë†’ì¼ ìˆ˜ ìˆì§€ë§Œ ì¶”ê°€ì ì¸ ì €ì¥ì†Œê°€ í•„ìš”í•´ì§€ê³  ì“°ê¸° ê³¼ì •ì—ì„œ ì˜¤ë²„í—¤ë“œê°€ ë°œìƒí•œë‹¤. ë˜í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‹¨ì—ì„œ ë³µì œë¡œ ì¸í•œ ë¶ˆì¼ì¹˜ë¥¼ íŒŒì•…í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— íŠ¸ëœì­ì…˜ ë³´ì¥ ê°•í™”ë¥¼ ìœ„í•´ ê°œë°œìì˜ ë…¸ë ¥ì´ í•„ìš”í•´ì§„ë‹¤. 

_ë‹¤ì¤‘ ì¹¼ëŸ¼ ìƒ‰ì¸_

ì§€ê¸ˆê¹Œì§€ ì„¤ëª…í•œ ìƒ‰ì¸ì€ í•˜ë‚˜ì˜ í‚¤ë§Œ ì ìš©ëœë‹¤. ë‹¤ì¤‘ ì»¬ëŸ¼ì— ë™ì‹œì— ì§ˆì˜í•´ì•¼ í•˜ëŠ” ê²½ìš°ì—ëŠ” ë‹¤ì¤‘ ì»¬ëŸ¼ ìƒ‰ì¸ì´ í•„ìš”í•˜ë‹¤.

1. ê²°í•© ìƒ‰ì¸(concatenated index)
    - í•˜ë‚˜ì˜ í‚¤ì— ì—¬ëŸ¬ í•„ë“œë¥¼ ë‹¨ìˆœíˆ ì´ì–´ ë¶™ì¸ë‹¤.
    - ì„±,ì´ë¦„(key) - ì „í™”ë²ˆí˜¸(value) ëª©ì°¨ë¡œ ì œê³µí•˜ëŠ” ì¢…ì´ ì „í™”ë²ˆí˜¸ë¶€ì™€ ìœ ì‚¬í•˜ë‹¤.
    - ìˆœì„œê°€ ì •ë ¬ë˜ì–´ ìˆì–´ íŠ¹ì • ì„±ì„ ê°€ì§„ ëª¨ë“  ì‚¬ëŒì„ ì°¾ê±°ë‚˜ íŠ¹ì • ì„±+ì´ë¦„ ì¡°í•©ì„ ê°€ì§„ ëª¨ë“  ì‚¬ëŒì„ ì°¾ì„ë•Œ ìƒ‰ì¸ì´ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.
    - í•˜ì§€ë§Œ íŠ¹ì • ì´ë¦„ë§Œ ê²€ìƒ‰í•  ê²½ìš°ì—ëŠ” ì“¸ëª¨ê°€ ì—†ë‹¤.
2. ë‹¤ì°¨ì› ìƒ‰ì¸
    - ì§€ë¦¬ ê³µê°„ ë°ì´í„°ì—ì„œ ì¤‘ìš”í•˜ê²Œ ì‚¬ìš©ë¨
    - BíŠ¸ë¦¬ì™€ LSMíŠ¸ë¦¬ ìƒ‰ì¸ì€ ì•„ë˜ì™€ ê°™ì€ 2ê°œì˜ ë²”ìœ„ ì§ˆì˜ì— íš¨ìœ¨ì ìœ¼ë¡œ ì‘ë‹µí•  ìˆ˜ ì—†ë‹¤.
      ```sql
      select * from restaurants 
      where latitude > 51.4946 and latitude < 51.5079
      and longitude > -0.1162 and longitude < -0.1004;
      ```
    - í•´ê²°ë°©ë²•ìœ¼ë¡œëŠ” ê³µê°„ ì±„ì›€ ê³¡ì„ (space-filling curve)ì„ ì´ìš©í•´ ì´ì°¨ì› ìœ„ì¹˜ë¥¼ ë‹¨ì¼ ìˆ«ìë¡œ ë³€í™˜í•œ ë‹¤ìŒ BíŠ¸ë¦¬ ìƒ‰ì¼ì„ ì‚¬ìš©í•œë‹¤.
    - ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œëŠ” ì „ë¬¸ ê³µê°„ ìƒ‰ì¸(specialized spatial index)ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤. PostgreSQLì˜ PostGISëŠ” RíŠ¸ë¦¬(Rectangle Tree) ê°™ì€ ì§€ë¦¬ ê³µê°„ ìƒ‰ì¸ì„ êµ¬í˜„í–ˆë‹¤.

í¥ë¯¸ë¡œìš´ ì ì€ ë‹¤ì°¨ì› ìƒ‰ì¸ì˜ í™œìš©ì´ ì§€ë¦¬ ê³µê°„ ë°ì´í„°ì—ì„œë§Œ ì‚¬ìš©ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë‹¤.

ì˜ˆë¥¼ë“¤ì–´ ì „ììƒê±°ë˜ ì›¹ì‚¬ì´íŠ¸ì—ì„œ íŠ¹ì • ìƒ‰ìƒ(ë¹¨ê°•, ì´ˆë¡, íŒŒë‘) ë²”ìœ„ ê²€ìƒ‰ì„ ìœ„í•´ 3ì°¨ì› ìƒ‰ì¸ì„ ì‚¬ìš©í•˜ê±°ë‚˜ ë‚ ì”¨ ê´€ì¸¡ì—ì„œ (ë‚ ì§œ, ê¸°ì˜¨)ì˜ 2ì°¨ì› ìƒ‰ì¸ì„ ì‚¬ìš©í•˜ê¸°ë„ í•œë‹¤.

ì´ëŸ¬í•œ ê¸°ë²•ì„ HyperDex(NoSQL DB)ì—ì„œ ì‚¬ìš©í•œë‹¤.

_ì „ë¬¸ ê²€ìƒ‰ê³¼ í¼ì§€ ìƒ‰ì¸_

ì§€ê¸ˆê¹Œì§€ ì„¤ëª…í•œ ëª¨ë“  ìƒ‰ì¸ì€ ì •í™•í•œ ë°ì´í„°ë¥¼ ëŒ€ìƒìœ¼ë¡œ í‚¤ì˜ ì •í™•í•œ ê°’ì´ë‚˜ ì •ë ¬ëœ í‚¤ì˜ ê°’ì˜ ë²”ìœ„ë¥¼ ì§ˆì˜í•  ìˆ˜ ìˆë‹¤. 
ì´ ìƒ‰ì¸ìœ¼ë¡œëŠ” ì² ìê°€ í‹€ë¦° ë‹¨ì–´ë‚˜ ìœ ì‚¬í•œ í‚¤ì— ëŒ€í•´ì„œëŠ” ê²€ìƒ‰í•  ìˆ˜ ì—†ë‹¤. 
ì´ëŸ° ì• ë§¤ëª¨í˜¸(fuzzy)í•œ ì§ˆì˜ì—ëŠ” ë‹¤ë¥¸ ê¸°ìˆ ì´ í•„ìš”í•˜ë‹¤.

ì „ë¬¸ ê²€ìƒ‰ì—”ì§„ì€ íŠ¹ì • ë‹¨ì–´ë¥¼ ê²€ìƒ‰í•  ë•Œ ë™ì˜ì–´ ì§ˆì˜ë¥¼ í™•ì¥í•œë‹¤. 
- ë‹¨ì–´ì˜ ë™ì¼í•œ ë¬¸ì„œì—ì„œ ì„œë¡œ ì¸ì ‘í•´ ë‚˜íƒ€ë‚œ ë‹¨ì–´ë¥¼ ê²€ìƒ‰
- ì–¸ì–´í•™ì ìœ¼ë¡œ í…ìŠ¤íŠ¸ë¥¼ ë¶„ì„í•´ ì‚¬ìš©í•˜ëŠ” ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì œê³µ

ë£¨ì”¬ì€ ë¬¸ì„œë‚˜ ì§ˆì˜ ì˜¤íƒ€ì— ëŒ€ì²˜í•˜ê¸° ìœ„í•´ íŠ¹ì • í¸ì§‘ ê±°ë¦¬(edit distance) ë‚´ì— ë‹¨ì–´ë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆë‹¤.
- edit distanceê°€ 1ì´ë¼ë©´ 1ê°œì˜ ë‹¨ì–´ê°€ í‹€ë ¤ë„ ê²€ìƒ‰ ê²°ê³¼ë¡œ ë…¸ì¶œì‹œì¼œì¤€ë‹¤.
- ì˜ˆë¥¼ ë“¤ì–´ appleì„ ê²€ìƒ‰í•˜ê¸° ìœ„í•´ apleë¡œ ê²€ìƒ‰í•´ë„ ê²°ê³¼ ë…¸ì¶œ
- SSí…Œì´ë¸” ê°™ì€ êµ¬ì¡°ë¥¼ í†µí•´ ìš©ì–´ ì‚¬ì „ì„ ë§Œë“¤ì–´ ë‘”ë‹¤.
- ì¸ë©”ëª¨ë¦¬ êµ¬ì¡°ë¡œ ìƒ‰ì¸ì„ ë§Œë“¤ì–´ ë‘”ë‹¤.
- ì¸ë©”ëª¨ë¦¬ ìƒ‰ì¸ì€ í‚¤ì— ëŒ€í•´ ìœ í•œ ìƒíƒœ ì˜¤í† ë§ˆí†¤(finite state automaton)ìœ¼ë¡œ íŠ¸ë¼ì´(trie)ì™€ ìœ ì‚¬í•˜ë‹¤.
  - trieëŠ” ë¬¸ìì—´ì„ ì €ì¥í•˜ëŠ” íŠ¸ë¦¬ êµ¬ì¡°ì´ë‹¤. ê° ë…¸ë“œëŠ” ë¬¸ì í•˜ë‚˜ë¥¼ ì €ì¥í•˜ê³  ë£¨íŠ¸ë¶€í„° ë‚´ë ¤ê°€ë©´ ë¬¸ìì—´ì´ ì™„ì„±ë˜ëŠ” êµ¬ì¡°ë‹¤.
- ì´ ìœ í•œ ìƒíƒœ ì˜¤í† ë§ˆí†¤ì€ ë ˆë²¤ìŠˆíƒ€ì¸ ì˜¤í† ë§ˆí†¤(levenshtein automaton)ìœ¼ë¡œ ë³€í™˜í•  ìˆ˜ ìˆë‹¤.
  - íŠ¹ì • í¸ì§‘ ê±°ë¦¬(edit distance) ë‚´ì—ì„œ ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.

ê·¸ ë°–ì— í¼ì§€ ê²€ìƒ‰ ê¸°ìˆ ì€ ë¬¸ì„œ ë¶„ë¥˜ ë° ë¨¸ì‹ ëŸ¬ë‹ì˜ ë°©í–¥ìœ¼ë¡œ ì§„í–‰ë˜ê³  ìˆë‹¤.

_ëª¨ë“  ê²ƒì„ ë©”ëª¨ë¦¬ì— ë³´ê´€_

ì§€ê¸ˆê¹Œì§€ ì„¤ëª…í•œ ë°ì´í„° êµ¬ì¡°ëŠ” ëª¨ë‘ ë””ìŠ¤í¬ í•œê³„ì— ëŒ€í•œ í•´ê²°ì±…ì— ëŒ€í•œ ë‚´ìš©ì´ì˜€ë‹¤.

ë””ìŠ¤í¬ëŠ” ì¢‹ì€ ì„±ëŠ¥ì„ ìœ„í•´ì„œ ê³ ë ¤í•´ì•¼ë  ë¶€ë¶„ë“¤ì´ ë§ë‹¤. ì´ëŸ° ë‹¨ì ë“¤ì—ë„ ë””ìŠ¤í¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” 2ê°€ì§€ì´ë‹¤.

1. ì§€ì†ì„±(ì „ì›ì´ êº¼ì ¸ë„ ë°ì´í„°ê°€ ì†ì‹¤ë˜ì§€ ì•ŠëŠ”ë‹¤.)
2. ë©”ëª¨ë¦¬(RAM)ë³´ë‹¤ ê°€ê²©ì´ ì €ë ´í•˜ë‹¤.
   - RAMë„ ì ì  ì €ë ´í•´ì ¸ ê°€ê²© ë…¼ìŸì€ ì•½í•´ì¡Œë‹¤.

ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ìš©ëŸ‰ì´ í¬ì§€ ì•Šì„ ê²½ìš°ì—ëŠ” ë””ìŠ¤í¬ ë§ê³  ë©”ëª¨ë¦¬ì— ë°ì´í„°ë¥¼ ì „ë¶€ ë³´ê´€í•˜ëŠ” ì¸ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤ì— ì „ë¶€ ë³´ê´€í•˜ëŠ” ë°©ì‹ë„ ê½¤ í˜„ì‹¤ì ì´ë‹¤.

ë©¤ìºì‹œë“œ ê°™ì€ ì¼ë¶€ ì¸ë©”ëª¨ë¦¬ ì €ì¥ì†ŒëŠ” ì¬ì‹œì‘ë˜ë©´ ë°ì´í„° ì†ì‹¤ì„ í—ˆìš©í•˜ëŠ” ìºì‹œ ìš©ë„ë¡œë§Œ ì‚¬ìš©ëœë‹¤. í•˜ì§€ë§Œ ì§€ì†ì„±ì„ ëª©í‘œë¡œ í•˜ëŠ” ì¸ë©”ëª¨ë¦¬ ë°ì´í„° ë² ì´ìŠ¤ë„ ã…ìˆë‹¤.

- ë°°í„°ë¦¬ ì „ì› ê³µê¸‰ RAMê³¼ ê°™ì€ íŠ¹ìˆ˜ í•˜ë“œì›¨ì–´ë¥¼ ì‚¬ìš©
- ë””ìŠ¤í¬ì— ë³€ê²½ ì‚¬í•­ì˜ ë¡œê·¸ë¥¼ ê¸°ë¡(ìŠ¤ëƒ¡ìƒ·)í•˜ì—¬ ì¬ì‹œì‘ ì‹œ ë°ì´í„° ë³µì›
  - ë””ìŠ¤í¬ì— ë‚´ìš©ì„ ê¸°ë¡í•˜ë”ë¼ë„ ì—¬ì „íˆ ì¸ë©”ëª¨ë¦¬ ì €ì¥ì†Œì¸ ì´ìœ ëŠ” ë””ìŠ¤í¬ëŠ” ë‹¨ì§€ ì§€ì†ì„±ì„ ìœ„í•œ ìš©ë„ì´ê³  ëª¨ë“  ì½ê¸°ëŠ” ì¸ë©”ëª¨ë¦¬ì—ì„œ ì œê³µí•˜ê¸° ë•Œë¬¸
  - ë””ìŠ¤í¬ì— ê¸°ë¡í•˜ëŠ” ë°©ì‹ì€ ì‰½ê²Œ ë°±ì—…ì´ ê°€ëŠ¥í•˜ê³  ì™¸ë¶€ ìœ í‹¸ë¦¬í‹°ë¥¼ ì‚¬ìš©í•¨ì— ìˆì–´ ìš´ì˜ì ì¸ ì¥ì ë„ ìˆë‹¤.

ì¸ë©”ëª¨ë¦¬ DB ì œí’ˆ
- VoltDB, MemSQL, Oracle timesTen ê°™ì€ ê´€ê³„í˜• ì¸ë©”ëª¨ë¦¬ DB
- RAMCloud ì˜¤í”ˆì†ŒìŠ¤ ì¸ë©”ëª¨ë¦¬ key-value ì €ì¥ì†Œ
- Reids, Couchbase ë¹„ë™ê¸°ë¡œ ë””ìŠ¤í¬ì— ê¸°ë¡í•˜ëŠ” ì•½í•œ ì§€ì†ì„± ì œê³µ DB

ë””ìŠ¤í¬ëŠ” OSì—ì„œ ìµœê·¼ì— ì‚¬ìš©í•œ ë””ìŠ¤í¬ ë¸”ë¡ì„ ìºì‹œí•˜ì—¬ ì œê³µí•˜ê¸°ë„ í•˜ëŠ”ë° ì¸ë©”ëª¨ë¦¬ëŠ” OS ìºì‹œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì˜¤íˆë ¤ ë°ì´í„°ë¥¼ ê¸°ë¡í•˜ê¸° ìœ„í•œ ì˜¤ë²„í—¤ë“œë¥¼ í”¼í•  ìˆ˜ ìˆì–´ ë” ë¹ ë¥´ë‹¤.

ì¸ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ë©”ëª¨ë¦¬ ìì²´ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì— ë””ìŠ¤í¬ ê¸°ë°˜ ìƒ‰ì¸ìœ¼ë¡œ êµ¬í˜„í•˜ê¸° ì–´ë ¤ìš´ ìš°ì„ ìˆœìœ„ í, setê³¼ ê°™ì€ ë‹¤ì–‘í•œ ìë£Œêµ¬ì¡°ë¥¼ ì œê³µí•  ìˆ˜ ìˆë‹¤.

ë””ìŠ¤í¬ ì¤‘ì‹¬ ì•„í‚¤í…ì²˜ì—ì„œ ë””ìŠ¤í¬ì— ê¸°ë¡í•˜ê³  ë””ìŠ¤í¬ì—ì„œ ì½ì–´ì™€ì„œ ë©”ëª¨ë¦¬ì— ë“±ë¡í•´ì•¼ í•˜ëŠ” ì˜¤ë²„í—¤ë“œê°€ ìˆë‹¤. 

ì¸ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ë©”ëª¨ë¦¬ ìì²´ì ìœ¼ë¡œ ë“±ë¡ë˜ì–´ ìˆê¸°ì— ì´ëŸ¬í•œ ì˜¤ë²„í—¤ë“œê°€ ì—†ëŠ”ë° ë©”ëª¨ë¦¬ê°€ ë¶€ì¡±í•  ìˆ˜ ìˆëŠ” ë¬¸ì œê°€ ìˆë‹¤. ì´ëŸ° ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì•ˆí‹° ìºì‹±(anti-caching)ì„ ì‚¬ìš©í•œë‹¤.
- ë©”ëª¨ë¦¬ê°€ ì¶©ë¶„í•˜ì§€ ì•Šì„ ë•Œ ë©”ëª¨ë¦¬ì— ìˆëŠ” ë°ì´í„°ë¥¼ ë””ìŠ¤í¬ë¡œ ë³´ë‚´ê³  ë‚˜ì¤‘ì— ì ‘ê·¼í•  ë•Œ ë‹¤ì‹œ ë©”ëª¨ë¦¬ì— ì ì¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë™ì‘í•œë‹¤.
- ëª¨ë“  ì½ê¸°ê°€ ë””ìŠ¤í¬ì—ì„œ ê°€ì ¸ì™€ ë©”ëª¨ë¦¬ì— ì ì¬í•˜ì—¬ ë…¸ì¶œí•˜ëŠ” ë””ìŠ¤í¬ ë°©ì‹ë³´ë‹¤ íš¨ìœ¨ì ì´ê³  ë©”ëª¨ë¦¬ ë¶€ì¡± ë¬¸ì œë„ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

ë¹„íœ˜ë°œì„± ë©”ëª¨ë¦¬(non-volatile memory, NVM)ì€ ì•ìœ¼ë¡œ ê³„ì† ë„ë¦¬ ì‚¬ìš©ë˜ë©° ì—°êµ¬ë˜ê³  ìˆê¸° ë•Œë¬¸ì— ê³„ì† ì£¼ëª©í• ë§Œí•œ ê¸°ìˆ ì´ë‹¤. 

## ğŸŸ  íŠ¸ëœì­ì…˜ ì²˜ë¦¬ë‚˜ ë¶„ì„?

íŠ¸ëœì­ì…˜ì˜ ë‹¨ì–´ëŠ” ì´ì „ì—ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ ì˜ë§ˆí•˜ëŠ” ì»¤ë¨¸ì…œ íŠ¸ëœì­ì…˜(commercial transaction ìƒê±°ë˜)ì— í•´ë‹¹í–ˆë‹¤.

í˜„ì¬ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¿ë§Œ ì•„ë‹Œ ì—¬ëŸ¬ ë°ì´í„° ì¢…ë¥˜ì— ì‚¬ìš©ë˜ê³  ìˆë‹¤.(ë¸”ë¡œê·¸ ëŒ“ê¸€, ê²Œì„ ì•¡ì…˜, ì£¼ì†Œì˜ ì—°ë½ì²˜ ë“±) ì´ëŸ¬í•œ íŒ¨í„´ì„ ì˜¨ë¼ì¸ íŠ¸ëœì­ì…˜ ì²˜ë¦¬(online transaction processing, OLTP)ë¼ê³  í•œë‹¤.

ë˜í•œ ë°ì´í„° ë¶„ì„(data analytic)ì—ë„ ë§ì´ ì‚¬ìš©ë˜ê³  ìˆëŠ”ë° ì´ë¥¼ ì˜¨ë¼ì¸ ë¶„ì„ ì²˜ë¦¬(online analytic processing, OLAP)ë¼ê³  ë¶€ë¥¸ë‹¤. 

| íŠ¹ì„±       | OLTP (íŠ¸ëœì­ì…˜)       | OLAP (ë¶„ì„)                   |
|----------|--------------------------|-----------------------------|
| ì£¼ìš” ì½ê¸° íŒ¨í„´ | ì§ˆì˜ë‹¹ ì ì€ ìˆ˜ì˜ ë ˆì½”ë“œ, í‚¤ ê¸°ì¤€ìœ¼ë¡œ ê°€ì ¸ì˜´ | ë§ì€ ë ˆì½”ë“œì— ëŒ€í•œ ì§‘ê³„               |
| ì“°ê¸° íŒ¨í„´    | ì„ì˜ ì ‘ê·¼, ì‚¬ìš©ìê°€ ìì£¼ ë“±ë¡        | bulk, ETL ë˜ëŠ” ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ |
| ì‚¬ìš© ëŒ€ìƒ    | ì‚¬ìš©ì/ì†Œë¹„ì                  | ì˜ì‚¬ê²°ì • ì§€ì›ì„ ìœ„í•œ ë¶„ì„ê°€             |
| ë°ì´í„° í‘œí˜„   | ë°ì´í„°ì˜ ìµœì‹  ìƒíƒœ               | ì‹œê°„ì—ì´ ì§€ë‚˜ë©° ì¼ì–´ë‚œ ì´ë²¤íŠ¸ ì´ë ¥         |
| ë°ì´í„°ì…‹ í¬ê¸°  | GB ~ TB                  | TB ~ PB                     |

```text
ETLì€ Extract, Transform, Load ìœ¼ë¡œ

Extract (ì¶”ì¶œ): ì—¬ëŸ¬ ì†ŒìŠ¤(ìš´ì˜ DB, ë¡œê·¸, API ë“±)ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´
Transform (ë³€í™˜): ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ê¸° ì¢‹ê²Œ ê°€ê³µí•¨
Load (ì ì¬): ë³€í™˜ëœ ë°ì´í„°ë¥¼ ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ ê°™ì€ ë¶„ì„ìš© DBì— ì €ì¥

batchë‚˜ ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ë¥¼ í†µí•´ ë°ì´í„° ê°€ê³µí•˜ëŠ” ê³¼ì •ì„ ë§í•œë‹¤.
```

SQLì€ OLTPë¿ ì•„ë‹ˆë¼ OLAPì—ì„œë„ ìœ ì—°í•˜ê²Œ ì˜ ë™ì‘í–ˆì§€ë§Œ 1980ë…„ í›„ë°˜ë¶€í„° ë°ì´í„° ì›¨ì–´ í•˜ìš°ìŠ¤(data warehouse)ë¼ëŠ” ê°œë³„ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í†µí•´ ë¶„ì„ì„ ì§„í–‰í–ˆë‹¤. 

### ğŸŸ¢ ë°ì´í„° ì›¨ì–´í•˜ìš°ì§•

ê¸°ì—…ì€ ìˆ˜ì‹­ ê°€ì§€ì˜ íŠ¸ëœì­ì…˜ ì‹œìŠ¤í…œì„ ê°–ì¶”ê³  ìˆë‹¤.
- ê³ ê° ëŒ€ë©´ ì›¹ì‚¬ì´íŠ¸ ê°•í™”
- íŒë§¤ ê³„ì‚° ì‹œìŠ¤í…œ ê´€ë¦¬
- ì°½ê³  ì¬ê³  ì¡°ì‚¬
- ìš´ì†¡ ìˆ˜ë‹¨ ê²½ë¡œ ê³„íš
- ê³µê¸‰ì—…ì²´ ê´€ë¦¬
- ì§ì› ê´€ë¦¬

ì´ëŸ° ì‹œìŠ¤í…œë“¤ì€ ë³µì¡í•´ì„œ ìœ ì§€ë³´ìˆ˜ë¥¼ ìœ„í•œ íŒ€ì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ë³´í†µ ì„œë¡œ ë…ìì ìœ¼ë¡œ ìš´ì˜ëœë‹¤.

OLTP ì‹œìŠ¤í…œì€ ë†’ì€ ê°€ìš©ì„±ê³¼ ë‚®ì€ latencyì˜ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ë¥¼ ê¸°ëŒ€í•œë‹¤. ê·¸ë ‡ê¸°ì— ë¹„ìš©ì´ ë¹„ì‹¼ ì¦‰ì„ ë¶„ì„ ì§ˆì˜(ad hoc analytic query)ë¥¼ OLTPì— ì§ì ‘ ì§ˆì˜í•˜ëŠ” ê²ƒì€ ì„±ëŠ¥ ì €í•˜ë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ ìˆë‹¤.

ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ëŠ” OLTP ì‘ì—…ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šê³  ë§ˆìŒê» ì§ˆì˜í•  ìˆ˜ ìˆëŠ” ê°œë³„ ë°ì´í„°ë² ì´ìŠ¤ë‹¤.
- íšŒì‚¬ ë‚´ì˜ ëª¨ë“  ë‹¤ì–‘í•œ OLTP ì‹œìŠ¤í…œì˜ ë³µì‚¬ë³¸
- ì£¼ê¸°ì ìœ¼ë¡œ ë¤í”„ë‚˜ ê°±ì‹  ìŠ¤íŠ¸ë¦¼ì„ ì‚¬ìš©í•´ ELT(extract-transform-load)í•œë‹¤.
  - ![img.png](ETL.png)

í˜„ì¬ ëª¨ë“  ëŒ€ê¸°ì—…ì—ëŠ” ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ê°€ ìˆì§€ë§Œ ì†Œê·œëª¨ ê¸°ì—…ì€ ê·¸ë ‡ì§€ ì•Šë‹¤. ì†Œê·œëª¨ ê¸°ì—…ì€ ë§ì€ OLTP ì‹œìŠ¤í…œì„ ê°€ì§€ê³  ìˆì§€ë„ ì•Šê³  ë°ì´í„°ë„ ì ê¸° ë•Œë¬¸ì´ë‹¤.

ë¶„ì„ì„ ìœ„í•´ OLTP ì‹œìŠ¤í…œ ëŒ€ì‹  ì›¨ì–´í•˜ìš°ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” í° ì¥ì ì€ ë¶„ì„ ì ‘ê·¼ íŒ¨í„´ì— ë§ê²Œ ìµœì í™”í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤.

_OLTP ë°ì´í„°ë² ì´ìŠ¤ì™€ ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ì˜ ì°¨ì´ì _

ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ëŠ” SQL ì§ˆì˜ê°€ ì í•©í•˜ê¸°ë„ í•˜ê³  ê´€ê³„í˜• ëª¨ë¸ì€ ì‚¬ìš©í•œë‹¤.

SQL ì§ˆì˜ë¥¼ ìƒì„±í•˜ê³  ê²°ê³¼ë¥¼ ì‹œê°í™”í•˜ê³  ë¶„ì„ê°€ê°€ ì‘ì—…ì„ í†µí•´ ë°ì´í„°ë¥¼ íƒìƒ‰í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê·¸ë˜í”½ ë°ì´í„° ë¶„ì„ë„êµ¬ê°€ ìˆë‹¤.
- ë“œë¦´ë‹¤ìš´(drill-down): ì„¸ë¶€ ë°ì´í„°ë¡œ ì ì  ë‚´ë ¤ê°€ë©° íƒìƒ‰
- ìŠ¬ë¼ì´ì‹±(slicing): íŠ¹ì • ì¡°ê±´ìœ¼ë¡œ ì˜ë¼ë‚´ì–´ íƒìƒ‰
- ë‹¤ì´ì‹±(dicing): ë‹¤ì°¨ì›ìœ¼ë¡œ ìª¼ê°œì„œ ë¹„êµ

RDBì™€ ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ë¥¼ ëª¨ë‘ ì§€ì›í•˜ëŠ” ì œí’ˆì´ ìˆë‹¤.
- MS SQL
- SAP HANA

ì‚¬ìš© ë¼ì´ì„¼ìŠ¤ë¡œ ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ ì§€ì›
- í…Œë¼ë°ì´í„°(Teradata)
- ë²„í‹°ì¹´(Vertica)
- SAP HANA
- íŒŒë¥´ì—ì–´ì…€(ParAccel)
  - Amazon RedShift: ì•„ë§ˆì¡´ì—ì„œ cloudë¡œ ì œê³µí•˜ëŠ” íŒŒë¥´ì—ì–´ì…€ ê¸°ë°˜

SQL ì˜¨ í•˜ë‘¡(SQL-on Haddop) - ì˜¤í”ˆì†ŒìŠ¤ë¡œ ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ ì§€ì›(ì´ì¤‘ ì¼ë¶€ëŠ” êµ¬ê¸€ì˜ ë“œë ˆë©œì—ì„œ ê°€ì ¸ì˜¨ ê°œë…ì„ ê¸°ë°˜ìœ¼ë¡œ í•œë‹¤.)
- ì•„íŒŒì¹˜ í•˜ì´ë¸Œ(Apache Hive)
- ìŠ¤íŒŒí¬ SQL(Spark SQL)
- í´ë¼ìš°ë°ë¼ ì„íŒ”ë¼(Cloudera Impala)
- í˜ì´ìŠ¤ë¶ í”„ë ˆìŠ¤í† (Facebook Presto)
- ì•„íŒŒì¹˜ íƒ€ì¡°(Apache Tajo)
- ì•„íŒŒì¹˜ ë“œë¦´(Apache Drill)

### ğŸŸ¢ ë¶„ì„ìš© ìŠ¤í‚¤ë§ˆ: ë³„ ëª¨ì–‘ ìŠ¤í‚¤ë§ˆì™€ ëˆˆê½ƒì†¡ì´ ëª¨ì–‘ ìŠ¤í‚¤ë§ˆ

OLPT ëª¨ë¸ì— ë¹„í•´ OLAPëŠ” ë°ì´í„° ëª¨ë¸ì˜ ë‹¤ì–‘ì„±ì´ í›¨ì”¬ ì ë‹¤. ë§ì€ ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ëŠ” ë³„ëª¨ì–‘ ìŠ¤í‚¤ë§ˆ(star schema) = ì°¨ì› ëª¨ë¸ë§(dimensional modeling)ìœ¼ë¡œ ì•Œë ¤ì§„ ì •í˜•í™”ëœ ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤.

![img.png](star-schema.png)

í•´ë‹¹ ì˜ˆì œëŠ” ì‹ë£Œí’ˆ ì†Œë§¤ì—…ì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.

ìŠ¤í‚¤ë§ˆ ì¤‘ì‹¬ì—ëŠ” ì‚¬ì‹¤ í…Œì´ë¸”(fact table = fact sales)ì´ ìˆë‹¤.  
- íŠ¹ì • ì‹œê°ì— ë°œìƒí•œ ì´ë²¤íŠ¸
- ì˜ˆì‹œì—ì„œëŠ” ê³ ê°ì˜ ì œí’ˆ êµ¬ë§¤ì— í•´ë‹¹
- ì›¹ì‚¬ì´íŠ¸ë¼ë©´ íŒë§¤ê°€ ì•„ë‹Œ ê³ ê°ì˜ í´ë¦­
- ê°œë³„ ì´ë²¤íŠ¸ë§Œì„ ë‹´ëŠ”ë‹¤. ë‚˜ì¤‘ì— ë¶„ì„ì˜ ìœ ì—°ì„±ì„ ê·¹ëŒ€í™”í•  ìˆ˜ ìˆê¸° ë•Œë¬¸
- ê°œë³„ ì´ë²¤íŠ¸ë§Œì„ ë‹´ë‹¤ë³´ë‹ˆ ë°ì´í„°ê°€ ë§¤ìš° ì»¤ì§ˆ ìˆ˜ ìˆë‹¤.
  - ì• í”Œ, ì›”ë§ˆíŠ¸, ì´ë² ì´ ê°™ì€ ëŒ€ê¸°ì—…ì€ ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ì— ìˆ˜ì‹­ í˜íƒ€ë°”ì´íŠ¸ì˜ íŠ¸ëœì­ì…˜ ë‚´ì—­ì„ ì €ì¥í•˜ê³  ìˆê³  ëŒ€ë¶€ë¶„ì€ ì‚¬ì‹¤ í…Œì´ë¸”ì´ë‹¤.

ì‚¬ì‹¤ í…Œì´ë¸”ì—ì„œ ë‹¤ë¥¸ í…Œì´ë¸”ì„ ê°€ë¦¬í‚¤ëŠ” ì™¸ë˜ ì°¸ì¡°í‚¤ê°€ ìˆë‹¤. ì°¸ì¡°ë˜ëŠ” í…Œì´ë¸”ì€ ì°¨ì› í…Œì´ë¸”(dimension table)ì´ë¼ ë¶€ë¥¸ë‹¤.
- ëˆ„ê°€(Who), ì–¸ì œ(When), ì–´ë””ì„œ(Where), ë¬´ì—‡ì„(What), ì–´ë–»ê²Œ(How), ì™œ(Why)ë¥¼ ë‚˜íƒ€ëƒ„
- ì˜ˆì‹œì—ì„œ **dim_product** tableì€ stock-keeping unit, description, brand name, category, fat content, package size ë“± ì œí’ˆì˜ ì„¤ëª…ì„ ë‚˜íƒ€ë‚¸ë‹¤.

ë³„ ëª¨ì–‘ ìŠ¤í‚¤ë§ˆë€ ì´ë¦„ì€ í…Œì´ë¸” ê´€ê³„ê°€ ì‹œê°í™”ë  ë•Œ ì‚¬ì‹¤ í…Œì´ë¸”ì„ ê°€ìš´ë° ë‘ê³  ì°¨ì› í…Œì´ë¸”ë¡œ ë‘˜ëŸ¬ì‹¸ê³  ìˆì–´ ë³„ ëª¨ì–‘ ìŠ¤í‚¤ë§ˆë¼ ë¶€ë¥¸ë‹¤.

ë³„ ëª¨ì–‘ ìŠ¤í‚¤ë§ˆì˜ ì°¨ì› í…Œì´ë¸”ì„ ë” ì„¸ë¶„í™”í•˜ëŠ” ë°©ë²•ì„ ëˆˆê½ƒì†¡ì´ ëª¨ì–‘ ìŠ¤í‚¤ë§ˆ(snowflake scheme)ì´ë¼ ë¶€ë¥¸ë‹¤.
- ì˜ˆë¥¼ ë“¤ì–´ ë¸Œëœë“œì™€ ì œí’ˆ ë²”ì£¼ì˜ í…Œì´ë¸”ì„ ë¶„ë¦¬í•  ìˆ˜ ìˆê³  **dim_proudct** í…Œì´ë¸”ì˜ ê° ë¡œìš°ëŠ” ë¬¸ìì—´ë¡œ ë¸Œëœë“œë¥¼ ì €ì¥í•˜ëŠ” ëŒ€ì‹  ì°¸ì¡°ë¡œ ë°”ê¿€ ìˆ˜ ìˆë‹¤.
- ë³„ëª¨ì–‘ ìŠ¤í‚¤ë§ˆë³´ë‹¤ ë” ì •ê·œí™”ë˜ì–´ ìˆëŠ” ë°ì´í„°ì§€ë§Œ ë¶„ì„ê°€ë“¤ì€ ë³„ ëª¨ì–‘ ìŠ¤í‚¤ë§ˆë¥¼ ì‘ì—…í•˜ê¸° ì‰½ë‹¤ëŠ” ì´ìœ ë¡œ ë” ì„ í˜¸í•œë‹¤.


## ğŸŸ  ì¹¼ëŸ¼ ì§€í–¥ ì €ì¥ì†Œ

ì‚¬ì‹¤ í…Œì´ë¸”ì— ë§ì€ ë¡œìš°ê°€ ìŒ“ì´ë©´ íš¨ìœ¨ì ìœ¼ë¡œ ì €ì¥í•˜ê³  ì§ˆì˜í•˜ëŠ”ë° ì–´ë ¤ì›€ì´ ìƒê¸´ë‹¤.

ì‚¬ì‹¤ í…Œì´ë¸”ì—ì„œëŠ” ë³´í†µ ì»¬ëŸ¼ì´ 100ê°œ ì´ìƒì´ì§€ë§Œ ì¼ë°˜ì ì¸ ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ì—ì„œëŠ” 4~5ê°œ ì»¬ëŸ¼ë§Œ ìˆìœ¼ë©´ ëœë‹¤.

```sql
SELECT
    dim_date.weekday, dim_product.category,
    SUM(fact_sales.quantity) AS quantity_sold
FROM fact_sales
JOIN dim_date ON fact_sales.date_key = dim_date.date_key
JOIN dim_product ON fact_sales.product_sk = dim_product.product_sk
WHERE
    dim_date.year = 2013 AND
    dim_product.category IN ('Fresh fruit', 'Candy')
GROUP BY
    dim_date.weekday, dim_product.category;
```

ì´ ì§ˆì˜ëŠ” ìˆ˜ë§ì€ ì»¬ëŸ¼ì— ì ‘ê·¼í•˜ì§€ë§Œ ì‚¬ì‹¤ date_key, product_sk, quantity 3ê°œì˜ ì»¬ëŸ¼ë§Œ í•„ìš”í•˜ë‹¤.

ëŒ€ë¶€ë¶„ì˜ OLTP DBëŠ” row ì§€í–¥ ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë°°ì¹˜í•œë‹¤. í…Œì´ë¸”ì—ì„œ í•œ ë¡œìš°ì˜ ëª¨ë“  ê°’ì€ ì„œë¡œ ì¸ì ‘í•˜ê²Œ ì €ì¥ëœë‹¤.

ìœ„ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•œë‹¤ê³  í–ˆì„ë•Œ 3ê°œì˜ ì»¬ëŸ¼ì— ëŒ€í•œ ì§ˆì˜ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ëª¨ë“  ë¡œìš°ë¥¼ ë©”ëª¨ë¦¬ë¡œ ì ì¬í•œ í›„ êµ¬ë¬¸ì„ í•´ì„í•˜ì—¬ í•„í„°ë§í•´ì•¼ í•˜ëŠ” ì‘ì—…ì´ í•„ìš”í•˜ë‹¤.

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì»¬ëŸ¼ ì§€í–¥ ì €ì¥ì†Œì˜ ê°œë…ì´ ë“±ì¥í–ˆë‹¤.
- ëª¨ë“  ê°’ì„ í•˜ë‚˜ì˜ ë¡œìš°ì— ì €ì¥í•˜ì§€ ì•Šê³  ê° ì»¬ëŸ¼ë³„ë¡œ ì €ì¥í•œë‹¤ëŠ” ê²ƒì´ë‹¤.
- ê° ì»¬ëŸ¼ì„ ê°œë³„ íŒŒì¼ì— ì €ì¥í•´ë‘ë©´ ì§ˆì˜ì— ì‚¬ìš©ë˜ëŠ” ì»¬ëŸ¼ë§Œ ì½ìœ¼ë©´ ëœë‹¤.
- ëª¨ë“  rowë¥¼ ì½ì–´ì„œ ì²˜ë¦¬í•˜ëŠ” ê²ƒë³´ë‹¤ í›¨ì”¬ ì‘ì—…ëŸ‰ì—ì„œ ìœ ë¦¬í•˜ë‹¤.
- ![img.png](column.png)

### ğŸŸ¢ ì¹¼ëŸ¼ ì••ì¶•

ì§ˆì˜ì— í•„ìš”í•œ ì»¬ëŸ¼ì„ ì••ì¶•í•˜ë©´ ì²˜ë¦¬ëŸ‰ì„ ë” ì¤„ì¼ ìˆ˜ ìˆë‹¤. ë‹¤í–‰íˆ ì»¬ëŸ¼ ì§€í–¥ ì €ì¥ì†ŒëŠ” ì••ì¶•ì— ì í•©í•˜ë‹¤.

![img.png](bitmap.png)

ë¹„íŠ¸ë§µ ë¶€í˜¸í™”(bitmap encoding)
- ì˜ˆì‹œ ê·¸ë¦¼ì²˜ëŸ¼ ê°™ì€ ê°’ì´ ë°˜ë³µì ìœ¼ë¡œ ì €ì¥ë˜ëŠ” ë°ì´í„°ê°€ ìˆì„ ë•Œ ì••ì¶•í•  ìˆ˜ ìˆë‹¤.
- ì˜ˆë¥¼ ë“¤ì–´ ì œí’ˆì€ 10ë§Œê°œì¸ë° íŒë§¤ê±´ì´ ìˆ˜ì‹­ì–µê±´ì¸ ê²½ìš° ìˆ˜ì‹­ì–µ ê±´ì˜ ë°ì´í„°ë¥¼ 10ë§Œê°œë¡œ ì¤„ì¼ ìˆ˜ ìˆë‹¤.
- ê³ ìœ  ê°’ì´ 1ê°œë¼ë©´ 1ê°œì˜ bitmap rowë¡œë§Œ í‘œí˜„ì´ ê°€ëŠ¥
- ë°˜ëŒ€ë¡œ ê³ ìœ  ê°’ì´ nê°œë¡œ ë” ë§ë‹¤ë©´ 0ìœ¼ë¡œ ì±„ì›Œì§€ëŠ” ë°ì´í„° ë¶€ë¶„ìœ¼ë¡œ ì¸í•´ ë©”ëª¨ë¦¬ ë‚­ë¹„ê°€ ìƒê¹€
  - ì´ëŸ° ë¬¸ì œë¥¼ í¬ì†Œ(sparse)ë¼ê³  í‘œí˜„í•¨
  - ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ ê·¸ë¦¼ê³¼ ê°™ì´ ëŸ° ë ìŠ¤ ë¶€í˜¸í™”(run-length encoding)ì„ ì§„í–‰í•¨
  - 0ì˜ ê°œìˆ˜ ê¸¸ì´ì™€ 1ì˜ ê°œìˆ˜ ê¸¸ì´ë¥¼ ìˆ«ìë¡œ ê·¸ëŒ€ë¡œ í‘œí˜„í•˜ì—¬ ì €ì¥í•¨ìœ¼ë¡œ ë©”ëª¨ë¦¬ ë‚­ë¹„ ë¬¸ì œë¥¼ í•´ê²°

```sql
WHEHE product_sk IN (30, 68, 69);
```

prudct_sk = 30, prudct_sk = 68, prudct_sk = 69ì— ëŒ€í•œ ë¹„íŠ¸ë§µ ì„¸ê°œë¥¼ ì ì¬í•˜ì—¬ OR ì—°ì‚°í•œë‹¤.

```sql
WHEHE product_sk = 31 AND store_sk = 3;
```

prudct_sk = 31, store_sk = 3 ë¹„íŠ¸ë§µì„ ì ì¬í•˜ê³  AND ê³„ì‚°í•œë‹¤.

ì´ëŸ¬í•œ ì¿¼ë¦¬ ì¡°ê±´ì´ ìˆì„ë•Œ ë¹„íŠ¸ë§µ ë¶€í˜¸í™”ë¥¼ í†µí•´ ë¹ ë¥´ê²Œ ì—°ì‚°ì´ ê°€ëŠ¥í•˜ë‹¤.

_ë©”ëª¨ë¦¬ ëŒ€ì—­í­ê³¼ ë²¡í„°í™” ì²˜ë¦¬_

ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ì˜ ì§ˆì˜ëŠ” ìˆ˜ë°±ë§Œ ë¡œìš°ë¥¼ ìŠ¤ìº”í•˜ëŠ” ë§Œí¼ ë§ì€ ë³‘ëª©ì´ ìˆë‹¤.
- ë§ì€ ë°ì´í„°ë¥¼ ë””ìŠ¤í¬ë¡œë¶€í„° ë©”ëª¨ë¦¬ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ëŒ€ì—­í­ ë³‘ëª©
- CPU ë¶„ê¸° ì˜ˆì¸¡ ì‹¤íŒ¨(branch misprediction), ë²„ë¸”(buble)ê³¼ ê°™ì€ ì´ìŠˆ
  - ë¶„ê¸° ì˜ˆì¸¡ ì‹¤íŒ¨: ifì™€ ê°™ì€ ë¶„ê¸° ì¡°ê±´ì—ì„œ ì˜ˆì¸¡ì„ ì‹¤íŒ¨í•˜ì—¬ ì‘ì—…ì´ ëŠ¦ì¶°ì§€ëŠ” í˜„ìƒ
  - ë²„ë¸”: ì•ì„  ì‘ì—…ì˜ ì´ìŠˆë¡œ ì¸í•´ ë’¤ì— ì‘ì—…ë“¤ì´ ê°™ì´ ë°€ë¦¬ëŠ” í˜„ìƒ
- ì´ëŸ¬í•œ ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ ìµœì‹  CPUì˜ ê²½ìš° ë‹¨ì¼ ëª…ë ¹ ë‹¤ì¤‘ ë°ì´í„° ëª…ë ¹(single-instruction-multi-data, SIMD)ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ê°œë°œìê°€ ì‹ ê²½ ì¨ì•¼í•¨

ì»¬ëŸ¼ ì €ì¥ì†Œ ë°°ì¹˜ëŠ” ë””ìŠ¤í¬ ìš©ëŸ‰ì„ ì¤„ì´ëŠ” ê²ƒ ì™¸ì—ë„ CPUë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸°ì— ì í•©í•˜ë‹¤.
- ì••ì¶•ëœ ì»¬ëŸ¼ ë°ì´í„°ë¥¼ CPU L1 ìºì‹œì— ë”± ë§ê²Œ ê°€ì ¸ì˜¤ê³  ì´ë¥¼ íƒ€ì´íŠ¸ ë£¨í”„ì—ì„œ ë¹ ë¥´ê²Œ ë°˜ë³µí•œë‹¤.
  - tight loop: ë¶ˆí•„ìš”í•œ ì‘ì—… ì—†ì´ ì§„í–‰ë˜ëŠ” ë°˜ë³µë¬¸
- L1 ìºì‹œì— ë” ë§ì€ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤.
- ë¹„íŠ¸ ANDì™€ OR ì—°ì‚°ìëŠ” ì¼ë°˜ rowë¥¼ í•˜ë‚˜ì”© ê²€ì‚¬í•˜ëŠ” ê²ƒë³´ë‹¤ ì••ì¶•ëœ ì»¬ëŸ¼ì—ì„œ í•œë²ˆì— ì²˜ë¦¬í•˜ê¸°ì— ë” ë¹ ë¥´ê²Œ ì—°ì‚°í•  ìˆ˜ ìˆë‹¤.
- ì´ëŸ¬í•œ ì„¤ê³„ ê¸°ë²•ì„ ë²¡í„°í™” ì²˜ë¦¬(vectorized processing)ì´ë¼ í•œë‹¤.

### ğŸŸ¢ ì¹¼ëŸ¼ ì €ì¥ì†Œì˜ ìˆœì„œ ì •ë ¬

ì»¬ëŸ¼ ì €ì¥ì†Œì—ì„œ ë¡œìš°ê°€ ì €ì¥ë˜ëŠ” ìˆœì„œëŠ” ì¤‘ìš”í•˜ì§€ ì•Šì§€ë§Œ SSí…Œì´ë¸”ì—ì„œ í–ˆë˜ ê²ƒì²˜ëŸ¼ ì •ë ¬ì„ í•œë‹¤ë©´ ì´ë¥¼ ìƒ‰ì¸ ë§¤ì»¤ë‹ˆì¦˜ì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ê° ì»¬ëŸ¼ë“¤ì˜ ë°ì´í„°ë“¤ì€ ì„œë¡œ rowë¡œ ì—°ê´€ë˜ì–´ ìˆê¸°ì— ë…ë¦½ì ìœ¼ë¡œ ì •ë ¬í•  ìˆœ ì—†ë‹¤. 

ê·¸ë ‡ê¸°ì— 1ì°¨ ì •ë ¬í‚¤ë¥¼ ì •í•˜ê³  1ì°¨ ì •ë ¬í‚¤ê°€ ê°™ì€ ê°’ë“¤ì— í•œí•´ì„œ 2ì°¨ ì •ë ¬ í‚¤ë¥¼ ì •í•´ì„œ ì ìš©í•  ìˆ˜ ìˆë‹¤.
- ì˜ˆë¥¼ ë“¤ì–´ ì§ˆì˜ê°€ ì§€ë‚œ ë‹¬(last month)ì²˜ëŸ¼ ì‹œê°„ ë²”ìœ„ë¥¼ ëª©í‘œë¡œ í•œë‹¤ë©´ 1ì°¨ ì •ë ¬í‚¤ë¥¼ date_keyë¡œ í•œë‹¤.
- ê·¸í›„ ê°™ì€ ë‚ ì§œì— íŒë§¤í•œ ì œí’ˆì„ í•¨ê»˜ ê·¸ë£¹í™” í• ìˆ˜ ìˆê²Œ product_skë¥¼ ë³´ì¡° ì •ë ¬í‚¤ë¡œ ì •í•œë‹¤.
- íŠ¹ì • ë‚ ì§œ ë²”ìœ„ì—ì„œ íŒë§¤í•œ ì œí’ˆì„ ê·¸ë£¹í™”í•˜ê±°ë‚˜ í•„í„°ë§í•˜ëŠ” ì§ˆì˜ì— ë„ì›€ì´ ë˜ëŠ” ìƒ‰ì¸ì´ ë  ìˆ˜ ìˆë‹¤.

ìˆœì„œë¥¼ ì •ë ¬í•˜ê²Œ ë˜ë©´ ì»¬ëŸ¼ ì••ì¶•ì— ë„ì›€ì´ ëœë‹¤. ê°™ì€ ê°’ì´ ì—°ì†í•´ì„œ ê¸¸ê²Œ ë°˜ë³µë  ìˆ˜ ìˆê²Œ ì •ë ¬ì´ ë˜ê¸° ë•Œë¬¸ì— ëŸ° ë ìŠ¤ ë¶€í˜¸í™” ì‘ì—…ì— ìœ ë¦¬í•´ì§„ë‹¤.

ì •ë ¬ì€ 2ë²ˆì§¸ 3ë²ˆì§¸ë¡œ ê°ˆìˆ˜ë¡ ì„±ëŠ¥ì„ ë³´ì¥í•  ìˆœ ì—†ì§€ë§Œ ì²«ë²ˆì§¸ ì •ë ¬ í‚¤ì—ì„œ ì„±ëŠ¥ê³¼ ì••ì¶• íš¨ìœ¨ì´ ì¢‹ë‹¤. 

_ë‹¤ì–‘í•œ ìˆœì„œ ì •ë ¬_

C storeì—ì„œ ì†Œê°œë˜ì—ˆê³  ë²„í‹°ì¹´ë¼ëŠ” ìƒì—…ìš© ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ì— ì ìš©ëœ ê°œë…ìœ¼ë¡œ ë‹¤ì–‘í•œ ì§ˆì˜ì— ëŒ€ë¹„í•´ ê°™ì€ ë°ì´í„°ë¥¼ ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ì •ë ¬í•˜ì—¬ ì €ì¥í•œë‹¤ëŠ” ê°œë…ì´ë‹¤.
- í•˜ë‚˜ì˜ ì¥ë¹„ê°€ ê³ ì¥ë‚˜ë„ ì¥ì• ê°€ ë°œìƒí•˜ì§€ ì•Šê¸° ìœ„í•´ ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ì¥ë¹„ì— ë³µì œí•´ë‘ëŠ” ì‘ì—…ì´ í•„ìš”í•˜ë‹¤.
- ì´ë•Œ ë³µì œ ë°ì´í„°ëŠ” ì„œë¡œ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì •ë ¬ë˜ì–´ ì €ì¥ëœë‹¤.
- ì—¬ëŸ¬ ì§ˆì˜ ì²˜ë¦¬ë¥¼ í• ë•Œ ê°€ì¥ ì í•©í•œ íŒ¨í„´ì´ ì ìš©ëœ ë°ì´í„°ì—ì„œ ê²€ìƒ‰ì„ ì§„í–‰í•  ìˆ˜ ìˆë‹¤.
- row ì§€í–¥ì—ì„œ ì—¬ëŸ¬ 2ì°¨ ìƒ‰ì¸ì„ ë‘ëŠ” ê²ƒê³¼ ë¹„ìŠ·í•˜ë‹¤.
  - 2ì°¨ ìƒ‰ì¸ì€ ì°¸ì¡°í•˜ëŠ” í¬ì¸í„°ê°€ ë˜ì§€ë§Œ ì¹¼ëŸ¼ ì €ì¥ì€ í¬ì¸í„°ê°€ ì•„ë‹Œ ê°’ì„ ê°€ì§€ê³  ìˆë‹¤ëŠ” ì ì—ì„œ ì°¨ì´ê°€ ìˆë‹¤.

### ğŸŸ¢ ì¹¼ëŸ¼ ì§€í–¥ ì €ì¥ì†Œì— ì“°ê¸°

ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ëŠ” ëŒ€ëŸ‰ì˜ ì½ê¸°ì—ì„œëŠ” ì»¬ëŸ¼ ì§€í–¥ ì €ì¥ì†Œ, ì••ì¶•, ì •ë ¬ ë“± ìµœì í™”ë˜ì–´ ìˆê³  í•©ë¦¬ì ì´ë‹¤. í•˜ì§€ë§Œ ì´ëŸ¬í•œ ì¥ì ì€ ì˜¤íˆë ¤ ì“°ê¸°ë¥¼ ì–´ë µê²Œ í•œë‹¤.

BíŠ¸ë¦¬ì™€ ê°™ì€ ì œìë¦¬ ê°±ì‹ (update-in-place) ë°©ì‹ì€ ì••ì¶•ëœ ì»¬ëŸ¼ì—ì„œ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ì •ë ¬ëœ í…Œì´ë¸”ì˜ ì¤‘ê°„ì— ì‚½ì…ì„ í•  ê²½ìš° ëª¨ë“  ì»¬ëŸ¼ì„ ì¬ì‘ì„± í•´ì•¼ë˜ê¸° ë•Œë¬¸ì´ë‹¤.

ë‹¤í–‰íˆë„ LSM íŠ¸ë¦¬ë¼ëŠ” ì¢‹ì€ í•´ê²°ì±…ì„ ì•Œê³ ìˆë‹¤. ì´ëŸ¬í•œ ë°©ë²•ì€ ì´ë¯¸ ë²„í‹°ì¹´ì— ì ìš©ë˜ì–´ ìˆë‹¤.
- ëª¨ë“  ì“°ê¸°ëŠ” ë¨¼ì € memtableë¡œ ì´ë™í•´ ì •ë ¬ë˜ì–´ ìˆëŠ”ë‹¤.
- ì¶©ë¶„íˆ ëª¨ì´ë©´ ë””ìŠ¤í¬ì— ì»¬ëŸ¼ íŒŒì¼ì— ë³‘í•©ë˜ê³  ì“°ê¸°ë¥¼ ì§„í–‰í•œë‹¤.

ì§ˆì˜ ìµœì í™”ê¸°(query optimizer)ëŠ” ë°ì´í„°ê°€ ì‚½ì…, ê°±ì‹ , ì‚­ì œë¡œ ìˆ˜ì •ë˜ëŠ” ë¶€ë¶„ì„ ë””ìŠ¤í¬ì— ì»¬ëŸ¼ ë°ì´í„°ì™€ ë©”ëª¨ë¦¬ì— ì €ì¥ëœ ìµœê·¼ ë°ì´í„°ë¥¼ ëª¨ë‘ ê²°í•©í•˜ì—¬ í•­ìƒ ìµœì‹ ì˜ ë°ì´í„°ë¡œ ë¶„ì„í•˜ì—¬ ë³´ì—¬ì¤€ë‹¤.

### ğŸŸ¢ ì§‘ê³„: ë°ì´í„° íë¸Œì™€ êµ¬ì²´í™” ë·°

ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ê°€ ì¸ê¸°ë¥¼ ì–»ê³  ìˆëŠ” ì´ìœ ëŠ” ë¶„ì„ ì§ˆì˜ì— ëŒ€í•´ ìƒë‹¹íˆ ë¹ ë¥´ê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ ì¤‘ ê°„ëµí•˜ê²Œ ì–¸ê¸‰í• ë§Œí•œ ë¶€ë¶„ì„ ì–¸ê¸‰í•´ë³´ë ¤ê³  í•œë‹¤.

- êµ¬ì²´í™” ë·°(materialized view)
  - ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ì˜ ì§ˆì˜ëŠ” ë³´í†µ SQLì˜ count, sum, avg, min, maxì™€ ê°™ì€ ì§‘ê³„ í•¨ìˆ˜ë¥¼ í¬í•¨í•œë‹¤.
  - ì´ëŸ° ì§‘ê³„ë•Œë§ˆë‹¤ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ ì—°ì‚°ì„ í•˜ëŠ”ê²ƒì€ ë¦¬ì†ŒìŠ¤ ë‚­ë¹„ë‹¤.
  - ì´ëŸ¬í•œ ì—°ì‚°ì„ ìºì‹œí•´ë‘ëŠ” ê²ƒì„ êµ¬ì²´í™” ë·°ë¼ê³  í•œë‹¤.
  - OLTP ë°ì´í„°ë² ì´ìŠ¤ì—ì„œë„ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ì§€ë§Œ ì“°ê¸° ë¹„ìœ¨ì´ í° ë°ì´í„°ë² ì´ìŠ¤ì´ë¯€ë¡œ ìì£¼ ì‚¬ìš©í•˜ì§„ ì•ŠëŠ”ë‹¤.
  - ë°˜ë©´ ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ëŠ” ì“°ê¸°ë³´ë‹¤ ì½ê¸° ë¹„ìœ¨ì´ í° ë°ì´í„°ë² ì´ìŠ¤ì´ë¯€ë¡œ êµ¬ì²´í™” ë·°ë¥¼ ì‚¬ìš©í•˜ëŠ” ì „ëµì´ í•©ë¦¬ì ì´ë‹¤.
- ë°ì´í„° íë¸Œ(data cube) or OLAP íë¸Œ
  - ![img.png](data-cube.png)
  - ë‹¤ì–‘í•œ ì°¨ì›ìœ¼ë¡œ ê·¸ë£¹í™”í•œ ì§‘ê³„ í…Œì´ë¸”ì´ë‹¤.
  - ì˜ˆì‹œì™€ ê°™ì´ dateì™€ productë¡œ 2ì°¨ì› í…Œì´ë¸”ì´ ìˆë‹¤ê³  ìƒê°í•´ë³´ì
  - ê° ì…€ì€ ë‚ ì§œë³„ ì§‘ê³„ í•©ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.
  - ì˜ˆì‹œëŠ” 2ì°¨ì›ì´ì§€ë§Œ ì‚¬ì‹¤ì€ ëŒ€ê²Œ 2ì°¨ì› ì´ìƒì´ë‹¤.
  - ì¥ì ì€ íŠ¹ì • ì§ˆì˜ë¥¼ ë¯¸ë¦¬ ê³„ì‚°í•´ë‘ì—ˆê¸° ë•Œë¬¸ì— ì§ˆì˜ ìˆ˜í–‰ì— ë§¤ìš° ë¹ ë¥´ë‹¤.
  - ë‹¨ì ì€ ì¡°ê±´ì— ë§ì¶° ìœ ì—°í•˜ê²Œ ì²˜ë¦¬ë  ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì´ë‹¤.
    - ì˜ˆë¥¼ ë“¤ì–´ 100ë‹¬ëŸ¬ ì´ìƒì¸ ë°ì´í„°ë§Œ ì¡°íšŒí•  ë• ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ë°ì´í„°ê°€ ëœë‹¤.
    - íŠ¹ì • ì§ˆì˜ì—ì„œë§Œ ì„±ëŠ¥ í–¥ìƒì„ ê¸°ëŒ€í•  ìˆ˜ ìˆë‹¤.

## ğŸŸ  ì •ë¦¬

ì´ë²ˆ ì¥ì—ì„œëŠ” ë°ì´í„°ë² ì´ìŠ¤ê°€ ì–´ë–»ê²Œ ì €ì¥ê³¼ ê²€ìƒ‰ì„ ë‹¤ë£¨ëŠ”ì§€ì— ëŒ€í•´ ì•Œì•„ë³´ê³ ì í–ˆë‹¤.
- ì“°ê¸°ë¥¼ í• ë• ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì–´ë–»ê²Œ ë°ì´í„°ë¥¼ ì €ì¥í• ê¹Œ?
- ì½ê¸°ë¥¼ ìœ„í•´ ì§ˆì˜ë¥¼ í• ë• ë°ì´í„°ë² ì´ìŠ¤ê°€ ìˆ˜í–‰í•˜ëŠ” ì‘ì—…ì€ ë­˜ê¹Œ?

ì €ì¥ì†Œ ì—”ì§„ì€ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ìµœì í™”(OLTP)ì™€ ë¶„ì„ ìµœì í™”(OLAP)ë¡œ ë‚˜ëˆ„ì–´ ë³¼ ìˆ˜ ìˆë‹¤.
- OLTP ì‹œìŠ¤í…œ
  - ì£¼ë¡œ ì‚¬ìš©ì ìš”ì²­ì„ ì²˜ë¦¬í•œë‹¤.
  - ë§ì€ ìš”ì²­ê³¼ ë¶€í•˜ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ì‘ì€ ë‹¨ìœ„ì— ë ˆì½”ë“œë¥¼ ë¹ ë¥´ê²Œ ì“°ê³  ì½ëŠ”ë° ìµœì í™” ë˜ì—ˆë‹¤.
  - ì§ˆì˜ë¥¼ ë¹ ë¥´ê²Œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ìƒ‰ì¸ì„ ì‚¬ìš©í•œë‹¤.
  - ì£¼ë¡œ ë””ìŠ¤í¬ íƒìƒ‰ì´ ë³‘ëª© ì›ì¸ì´ë‹¤.
- OLAP ì‹œìŠ¤í…œ ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤
  - ë¶„ì„ê°€ê°€ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤.
  - OLTPì— ë¹„í•´ì„œëŠ” ìš”ì²­ì´ ì ì§€ë§Œ ìˆ˜ë°±ë§Œ ê°œì˜ ë ˆì½”ë“œë¥¼ ìŠ¤ìº”í•´ì•¼ í•œë‹¤.
  - ì£¼ë¡œ ë””ìŠ¤í¬ ëŒ€ì—­í­ì´ ë³‘ëª©ì´ë‹¤.
  - ì¹¼ëŸ¼ ì§€í–¥ ì €ì¥ì†Œë¥¼ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤.

OLTP ì¸¡ë©´ì—ì„œ ì£¼ìš” ê´€ì ì„ ì‚´í´ë´¤ë‹¤.
- ë¡œê·¸ êµ¬ì¡° ê´€ì ì—ì„œ íŒŒì¼ì˜ ì¶”ê°€ì™€ ì˜¤ë˜ëœ íŒŒì¼ì˜ ì‚­ì œë§Œ í—ˆìš©í•˜ê³  í•œë²ˆ ì“°ì—¬ì§„ íŒŒì¼ì€ ì ˆëŒ€ë¡œ ê°±ì‹ ë˜ì§€ ì•ŠëŠ”ë‹¤.
  - ë¹„íŠ¸ìºìŠ¤í¬, SSí…Œì´ë¸”, LSMíŠ¸ë¦¬, leveled DB, cassandra, HBase, ë£¨ì”¬ ë“± ì œí’ˆì´ ìˆë‹¤.
- ì œë¼ë¦¬ ê°±ì‹  ê´€ì ì—ì„œ ë®ì–´ì“°ê¸° í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ë‹¤ë£¬ë‹¤.
  - B-tree

ë¡œê·¸ êµ¬ì¡°í™” ì €ì¥ì†Œ ì—”ì§„ì— ëŒ€í•´ ì•Œì•„ë´¤ë‹¤.
- ìµœê·¼ì— ê°œë°œë˜ì—ˆë‹¤.
- ì„ì˜ ì ‘ê·¼ ì“°ê¸°ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ë””ìŠ¤í¬ì— ìˆœì°¨ ì“°ê¸°ë¡œ ë°”ê¾¼ ê²ƒì´ë‹¤.
- HDDì™€ SSD ì„±ëŠ¥ íŠ¹ì„±ì— ë§ì¶° ì“°ê¸° ì²˜ë¦¬ëŸ‰ì„ ë†’ì´ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.

ë°ì´í„° ì›¨ì–´í•˜ìš°ìŠ¤ì˜ ì•„í‚¤í…ì²˜ë¥¼ ì‚´í´ë³´ê¸° ìœ„í•´ ì €ì¥ì†Œ ì—”ì§„ ë‚´ë¶€ë¥¼ ì•Œì•„ë´¤ë‹¤.
- ì´ëŠ” ì™œ ë¶„ì„ ì‘ì—…ì´ OLTPì™€ ë§ì´ ë‹¤ë¥¸ì§€ ì„¤ëª…í•´ì¤€ë‹¤.
- í•˜ë‚˜ì˜ ì§ˆì˜ê°€ ìˆ˜ë°±ë§Œ ë¡œìš°ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ìŠ¤ìº”í•´ì•¼ í•œë‹¤ë©´ ìƒ‰ì¸ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€ ì ì ˆì¹˜ ì•Šë‹¤.
- ëŒ€ì‹  ì§ˆì˜ê°€ ë””ìŠ¤í¬ë¥¼ ì½ëŠ” ë°ì´í„° ì–‘ì„ ìµœì†Œí™”í•˜ê¸° ìœ„í•´ ì••ì¶•í•˜ëŠ” ì¼ì´ ì¤‘ìš”í•´ì¡Œë‹¤.
- ì¹¼ëŸ¼ ì§€í–¥ ì €ì¥ì†Œê°€ ì–´ë–»ê²Œ ì´ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ëŠ”ë° ë„ì›€ì´ ë˜ëŠ”ì§€ ì„¤ëª…í–ˆë‹¤.

ê°œë°œìê°€ ì €ì¥ì†Œ ì—”ì§„ì˜ ë‚´ë¶€ì— ëŒ€í•œ ì§€ì‹ì´ ìˆë‹¤ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì–´ë–¤ ë„êµ¬ê°€ ì í•©í•œì§€ íŒë‹¨í•˜ê¸°ì— ìœ ë¦¬í•˜ë‹¤.

ì´ë²ˆ ì¥ì˜ ë‚´ìš©ë§Œìœ¼ë¡œ íŠ¹ì • ì €ì¥ì†Œ ì—”ì§„ì„ íŠœë‹í•  ì •ë„ì˜ ì „ë¬¸ê°€ê°€ ë  ìˆ˜ëŠ” ì—†ì§€ë§Œ ì„ íƒí•œ ë°ì´í„° ë² ì´ìŠ¤ì˜ ë¬¸ì„œë¥¼ ì´í•´í•  ìˆ˜ ìˆëŠ” ì¶©ë¶„í•œ ì–´íœ˜ì™€ ê°œë…ì„ ê°–ì¶”ëŠ”ë° ë„ì›€ì´ ë˜ì—ˆì„ ê²ƒì´ë‹¤.
